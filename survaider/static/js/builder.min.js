var Node=Node||{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3};$.scrollWindowTo=function(a,b,c){return null==b&&(b=0),a===$(window).scrollTop()?($(window).trigger("scroll"),void("function"==typeof c&&c())):$("html, body").animate({scrollTop:a},b,function(){return"function"==typeof c?c():void 0})},function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.5.2";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return arguments.length<2||c?a[x.random(a.length-1)]:x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={},f=null==c?x.identity:B(c);return y(b,function(c,g){var h=f.call(d,c,g,b);a(e,h,c)}),e}};x.groupBy=C(function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var a,b,c,d,e,f,g=[].slice;c=function(a){var b,d;return _.isObject(a||_.isFunction(a))?_.isDate(a)?new Date(a.getTime()):_.isRegExp(a)?new RegExp(a.source,a.toString().replace(/.*\//,"")):(d=_.isArray(a||_.isArguments(a)),b=function(a,b,e){return d?a.push(c(b)):a[e]=c(b),a},_.reduce(a,b,d?[]:{})):a},f=function(a){return null===a?!1:(a.prototype==={}.prototype||a.prototype===Object.prototype)&&_.isObject(a)&&!_.isArray(a)&&!_.isFunction(a)&&!_.isDate(a)&&!_.isRegExp(a)&&!_.isArguments(a)},b=function(a){return _.filter(_.keys(a),function(b){return f(a[b])})},a=function(a){return _.filter(_.keys(a),function(b){return _.isArray(a[b])})},e=function(c,d,f){var g,h,i,j,k,l,m,n,o,p;if(null==f&&(f=20),0>=f)return console.warn("_.deepExtend(): Maximum depth of recursion hit."),_.extend(c,d);for(l=_.intersection(b(c),b(d)),h=function(a){return d[a]=e(c[a],d[a],f-1)},m=0,o=l.length;o>m;m++)k=l[m],h(k);for(j=_.intersection(a(c),a(d)),g=function(a){return d[a]=_.union(c[a],d[a])},n=0,p=j.length;p>n;n++)i=j[n],g(i);return _.extend(c,d)},d=function(){var a,b,d,f;if(d=2<=arguments.length?g.call(arguments,0,f=arguments.length-1):(f=0,[]),b=arguments[f++],_.isNumber(b)||(d.push(b),b=20),d.length<=1)return d[0];if(0>=b)return _.extend.apply(this,d);for(a=d.shift();d.length>0;)a=e(a,c(d.shift()),b);return a},_.mixin({deepClone:c,isBasicObject:f,basicObjects:b,arrays:a,deepExtend:d})}.call(this),function(){function a(a,c,d,e){return new b(a,c,d,e)}function b(a,b,d,e){this.options=e||{},this.options.adapters=this.options.adapters||{},this.obj=a,this.keypath=b,this.callback=d,this.objectPath=[],this.parse(),c(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function c(a){return"object"==typeof a&&null!==a}function d(a){throw new Error("[sightglass] "+a)}a.adapters={},b.tokenize=function(a,b,c){var d,e,f=[],g={i:c,path:""};for(d=0;d<a.length;d++)e=a.charAt(d),~b.indexOf(e)?(f.push(g),g={i:e,path:""}):g.path+=e;return f.push(g),f},b.prototype.parse=function(){var c,e,f=this.interfaces();f.length||d("Must define at least one adapter interface."),~f.indexOf(this.keypath[0])?(c=this.keypath[0],e=this.keypath.substr(1)):("undefined"==typeof(c=this.options.root||a.root)&&d("Must define a default root adapter."),e=this.keypath),this.tokens=b.tokenize(e,f,c),this.key=this.tokens.pop()},b.prototype.realize=function(){var a,b=this.obj,d=!1;return this.tokens.forEach(function(e,f){c(b)?("undefined"!=typeof this.objectPath[f]?b!==(a=this.objectPath[f])&&(this.set(!1,e,a,this.update.bind(this)),this.set(!0,e,b,this.update.bind(this)),this.objectPath[f]=b):(this.set(!0,e,b,this.update.bind(this)),this.objectPath[f]=b),b=this.get(e,b)):(d===!1&&(d=f),(a=this.objectPath[f])&&this.set(!1,e,a,this.update.bind(this)))},this),d!==!1&&this.objectPath.splice(d),b},b.prototype.update=function(){var a,b;(a=this.realize())!==this.target&&(c(this.target)&&this.set(!1,this.key,this.target,this.callback),c(a)&&this.set(!0,this.key,a,this.callback),b=this.value(),this.target=a,this.value()!==b&&this.callback())},b.prototype.value=function(){return c(this.target)?this.get(this.key,this.target):void 0},b.prototype.setValue=function(a){c(this.target)&&this.adapter(this.key).set(this.target,this.key.path,a)},b.prototype.get=function(a,b){return this.adapter(a).get(b,a.path)},b.prototype.set=function(a,b,c,d){var e=a?"observe":"unobserve";this.adapter(b)[e](c,b.path,d)},b.prototype.interfaces=function(){var b=Object.keys(this.options.adapters);return Object.keys(a.adapters).forEach(function(a){~b.indexOf(a)||b.push(a)}),b},b.prototype.adapter=function(b){return this.options.adapters[b.i]||a.adapters[b.i]},b.prototype.unobserve=function(){var a;this.tokens.forEach(function(b,c){(a=this.objectPath[c])&&this.set(!1,b,a,this.update.bind(this))},this),c(this.target)&&this.set(!1,this.key,this.target,this.callback)},"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define([],function(){return this.sightglass=a}):this.sightglass=a}.call(this),function(){var a,b,c=function(a,b){return function(){return a.apply(b,arguments)}},d=[].slice,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},g=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a={},b=window.jQuery||window.Zepto,String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),a.Binding=function(){function b(a,b,d,e,f,g){var h,i,j,k;if(this.view=a,this.el=b,this.type=d,this.key=e,this.keypath=f,this.options=null!=g?g:{},this.update=c(this.update,this),this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.publish=c(this.publish,this),this.sync=c(this.sync,this),this.set=c(this.set,this),this.eventHandler=c(this.eventHandler,this),this.formattedValue=c(this.formattedValue,this),!(this.binder=this.view.binders[d])){k=this.view.binders;for(h in k)j=k[h],"*"!==h&&-1!==h.indexOf("*")&&(i=new RegExp("^"+h.replace("*",".+")+"$"),i.test(d)&&(this.binder=j,this.args=new RegExp("^"+h.replace("*","(.+)")+"$").exec(d),this.args.shift()))}this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function&&(this.binder={routine:this.binder}),this.formatters=this.options.formatters||[],this.model=this.key?this.view.models[this.key]:this.view.models}return b.prototype.formattedValue=function(a){var b,c,e,f,g,h;for(h=this.formatters,f=0,g=h.length;g>f;f++)c=h[f],b=c.split(/\s+/),e=b.shift(),c=this.model[e]instanceof Function?this.model[e]:this.view.formatters[e],(null!=c?c.read:void 0)instanceof Function?a=c.read.apply(c,[a].concat(d.call(b))):c instanceof Function&&(a=c.apply(null,[a].concat(d.call(b))));return a},b.prototype.eventHandler=function(a){var b,c;return c=(b=this).view.config.handler,function(d){return c.call(a,this,d,b)}},b.prototype.set=function(a){var b;return a=a instanceof Function&&!this.binder["function"]?this.formattedValue(a.call(this.model)):this.formattedValue(a),null!=(b=this.binder.routine)?b.call(this,this.el,a):void 0},b.prototype.sync=function(){return this.set(this.options.bypass?this.model[this.keypath]:this.view.config.adapter.read(this.model,this.keypath))},b.prototype.publish=function(){var b,c,e,f,g,h,i,j,k;for(f=a.Util.getInputValue(this.el),i=this.formatters.slice(0).reverse(),g=0,h=i.length;h>g;g++)c=i[g],b=c.split(/\s+/),e=b.shift(),(null!=(j=this.view.formatters[e])?j.publish:void 0)&&(f=(k=this.view.formatters[e]).publish.apply(k,[f].concat(d.call(b))));return this.view.config.adapter.publish(this.model,this.keypath,f)},b.prototype.bind=function(){var a,b,c,d,e,f,g,h,i;if(null!=(f=this.binder.bind)&&f.call(this,this.el),this.options.bypass?this.sync():(this.view.config.adapter.subscribe(this.model,this.keypath,this.sync),this.view.config.preloadData&&this.sync()),null!=(g=this.options.dependencies)?g.length:void 0){for(h=this.options.dependencies,i=[],d=0,e=h.length;e>d;d++)a=h[d],/^\./.test(a)?(c=this.model,b=a.substr(1)):(a=a.split("."),c=this.view.models[a.shift()],b=a.join(".")),i.push(this.view.config.adapter.subscribe(c,b,this.sync));return i}},b.prototype.unbind=function(){var a,b,c,d,e,f,g,h,i;if(null!=(f=this.binder.unbind)&&f.call(this,this.el),this.options.bypass||this.view.config.adapter.unsubscribe(this.model,this.keypath,this.sync),null!=(g=this.options.dependencies)?g.length:void 0){for(h=this.options.dependencies,i=[],d=0,e=h.length;e>d;d++)a=h[d],/^\./.test(a)?(c=this.model,b=a.substr(1)):(a=a.split("."),c=this.view.models[a.shift()],b=a.join(".")),i.push(this.view.config.adapter.unsubscribe(c,b,this.sync));return i}},b.prototype.update=function(a){var b;return null==a&&(a={}),this.key?a[this.key]&&(this.options.bypass||this.view.config.adapter.unsubscribe(this.model,this.keypath,this.sync),this.model=a[this.key],this.options.bypass?this.sync():(this.view.config.adapter.subscribe(this.model,this.keypath,this.sync),this.view.config.preloadData&&this.sync())):this.sync(),null!=(b=this.binder.update)?b.call(this,a):void 0},b}(),a.ComponentBinding=function(b){function d(b,d,e){var f,h,i,j,k;for(this.view=b,this.el=d,this.type=e,this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.update=c(this.update,this),this.locals=c(this.locals,this),this.component=a.components[this.type],this.attributes={},this.inflections={},j=this.el.attributes||[],h=0,i=j.length;i>h;h++)f=j[h],k=f.name,g.call(this.component.attributes,k)>=0?this.attributes[f.name]=f.value:this.inflections[f.name]=f.value}return f(d,b),d.prototype.sync=function(){},d.prototype.locals=function(a){var b,c,d,e,f,g,h,i,j;null==a&&(a=this.view.models),f={},i=this.inflections;for(c in i)for(b=i[c],j=b.split("."),g=0,h=j.length;h>g;g++)e=j[g],f[c]=(f[c]||a)[e];for(c in a)d=a[c],null==f[c]&&(f[c]=d);return f},d.prototype.update=function(a){var b;return null!=(b=this.componentView)?b.update(this.locals(a)):void 0},d.prototype.bind=function(){var b,c;return null!=this.componentView?null!=(c=this.componentView)?c.bind():void 0:(b=this.component.build.call(this.attributes),(this.componentView=new a.View(b,this.locals(),this.view.options)).bind(),this.el.parentNode.replaceChild(b,this.el))},d.prototype.unbind=function(){var a;return null!=(a=this.componentView)?a.unbind():void 0},d}(a.Binding),a.TextBinding=function(a){function b(a,b,d,e,f,g){this.view=a,this.el=b,this.type=d,this.key=e,this.keypath=f,this.options=null!=g?g:{},this.sync=c(this.sync,this),this.formatters=this.options.formatters||[],this.model=this.key?this.view.models[this.key]:this.view.models}return f(b,a),b.prototype.binder={routine:function(a,b){return a.data=null!=b?b:""}},b.prototype.sync=function(){return b.__super__.sync.apply(this,arguments)},b}(a.Binding),a.View=function(){function b(b,d,e){var f,g,h,i,j,k,l,m,n;for(this.els=b,this.models=d,this.options=null!=e?e:{},this.update=c(this.update,this),this.publish=c(this.publish,this),this.sync=c(this.sync,this),this.unbind=c(this.unbind,this),this.bind=c(this.bind,this),this.select=c(this.select,this),this.build=c(this.build,this),this.componentRegExp=c(this.componentRegExp,this),this.bindingRegExp=c(this.bindingRegExp,this),"undefined"==typeof this.els.length&&(this.els=[this.els]),l=["config","binders","formatters"],j=0,k=l.length;k>j;j++){if(g=l[j],this[g]={},this.options[g]){m=this.options[g];for(f in m)h=m[f],this[g][f]=h}n=a[g];for(f in n)h=n[f],null==(i=this[g])[f]&&(i[f]=h)}this.build()}return b.prototype.bindingRegExp=function(){var a;return a=this.config.prefix,a?new RegExp("^data-"+a+"-"):/^data-/},b.prototype.componentRegExp=function(){var a,b;return new RegExp("^"+(null!=(a=null!=(b=this.config.prefix)?b.toUpperCase():void 0)?a:"RV")+"-")},b.prototype.build=function(){var b,c,e,f,h,i,j,k,l,m=this;for(this.bindings=[],i=[],b=this.bindingRegExp(),e=this.componentRegExp(),c=function(b,c,d,e){var f,g,h,i,j,k,l,n,o,p;return k={},o=function(){var a,b,c,d;for(c=e.split("|"),d=[],a=0,b=c.length;b>a;a++)n=c[a],d.push(n.trim());return d}(),f=function(){var a,b,c,d;for(c=o.shift().split("<"),d=[],a=0,b=c.length;b>a;a++)g=c[a],d.push(g.trim());return d}(),l=f.shift(),p=l.split(/\.|:/),k.formatters=o,k.bypass=-1!==l.indexOf(":"),p[0]?i=p.shift():(i=null,p.shift()),j=p.join("."),(h=f.shift())&&(k.dependencies=h.split(/\s+/)),m.bindings.push(new a[b](m,c,d,i,j,k))},h=function(f){var j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;if(g.call(i,f)<0){if(f.nodeType===Node.TEXT_NODE){if(r=a.TextTemplateParser,(o=m.config.templateDelimiters)&&(x=r.parse(f.data,o)).length&&(1!==x.length||x[0].type!==r.types.text))for(u=x[0],t=2<=x.length?d.call(x,1):[],f.data=u.value,0===u.type?f.data=u.value:c("TextBinding",f,null,u.value),A=0,E=t.length;E>A;A++)w=t[A],v=document.createTextNode(w.value),f.parentNode.appendChild(v),1===w.type&&c("TextBinding",v,null,w.value)}else if(e.test(f.tagName))y=f.tagName.replace(e,"").toLowerCase(),m.bindings.push(new a.ComponentBinding(m,f,y));else if(null!=f.attributes){for(K=f.attributes,B=0,F=K.length;F>B;B++)if(j=K[B],b.test(j.name)){if(y=j.name.replace(b,""),!(l=m.binders[y])){L=m.binders;for(p in L)z=L[p],"*"!==p&&-1!==p.indexOf("*")&&(s=new RegExp("^"+p.replace("*",".+")+"$"),s.test(y)&&(l=z))}if(l||(l=m.binders["*"]),l.block){for(M=f.childNodes,C=0,G=M.length;G>C;C++)q=M[C],i.push(q);k=[j]}}for(N=k||f.attributes,D=0,H=N.length;H>D;D++)j=N[D],b.test(j.name)&&(y=j.name.replace(b,""),c("Binding",f,y,j.value))}for(O=f.childNodes,P=[],J=0,I=O.length;I>J;J++)n=O[J],P.push(h(n));return P}},l=this.els,j=0,k=l.length;k>j;j++)f=l[j],h(f)},b.prototype.select=function(a){var b,c,d,e,f;for(e=this.bindings,f=[],c=0,d=e.length;d>c;c++)b=e[c],a(b)&&f.push(b);return f},b.prototype.bind=function(){var a,b,c,d,e;for(d=this.bindings,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.bind());return e},b.prototype.unbind=function(){var a,b,c,d,e;for(d=this.bindings,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.unbind());return e},b.prototype.sync=function(){var a,b,c,d,e;for(d=this.bindings,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.sync());return e},b.prototype.publish=function(){var a,b,c,d,e;for(d=this.select(function(a){return a.binder.publishes}),e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.publish());return e},b.prototype.update=function(a){var b,c,d,e,f,g,h;null==a&&(a={});for(c in a)d=a[c],this.models[c]=d;for(g=this.bindings,h=[],e=0,f=g.length;f>e;e++)b=g[e],h.push(b.update(a));return h},b}(),a.TextTemplateParser=function(){function a(){}return a.types={text:0,binding:1},a.parse=function(a,b){var c,d,e,f,g,h,i;for(h=[],f=a.length,c=0,d=0;f>d;){if(c=a.indexOf(b[0],d),0>c){h.push({type:this.types.text,value:a.slice(d)});break}if(c>0&&c>d&&h.push({type:this.types.text,value:a.slice(d,c)}),d=c+2,c=a.indexOf(b[1],d),0>c){g=a.slice(d-2),e=h[h.length-1],(null!=e?e.type:void 0)===this.types.text?e.value+=g:h.push({type:this.types.text,value:g});break}i=a.slice(d,c).trim(),h.push({type:this.types.binding,value:i}),d=c+2}return h},a}(),a.Util={bindEvent:function(a,c,d){return null!=window.jQuery?(a=b(a),null!=a.on?a.on(c,d):a.bind(c,d)):null!=window.addEventListener?a.addEventListener(c,d,!1):(c="on"+c,a.attachEvent(c,d))},unbindEvent:function(a,c,d){return null!=window.jQuery?(a=b(a),null!=a.off?a.off(c,d):a.unbind(c,d)):null!=window.removeEventListener?a.removeEventListener(c,d,!1):(c="on"+c,a.detachEvent(c,d))},getInputValue:function(a){var c,d,e,f;if(null!=window.jQuery)switch(a=b(a),a[0].type){case"checkbox":return a.is(":checked");default:return a.val()}else switch(a.type){case"checkbox":return a.checked;case"select-multiple":for(f=[],d=0,e=a.length;e>d;d++)c=a[d],c.selected&&f.push(c.value);return f;default:return a.value}}},a.binders={enabled:function(a,b){return a.disabled=!b},disabled:function(a,b){return a.disabled=!!b},checked:{publishes:!0,bind:function(b){return a.Util.bindEvent(b,"change",this.publish)},unbind:function(b){return a.Util.unbindEvent(b,"change",this.publish)},routine:function(a,b){var c;return"radio"===a.type?a.checked=(null!=(c=a.value)?c.toString():void 0)===(null!=b?b.toString():void 0):a.checked=!!b}},unchecked:{publishes:!0,bind:function(b){return a.Util.bindEvent(b,"change",this.publish)},unbind:function(b){return a.Util.unbindEvent(b,"change",this.publish)},routine:function(a,b){var c;return"radio"===a.type?a.checked=(null!=(c=a.value)?c.toString():void 0)!==(null!=b?b.toString():void 0):a.checked=!b}},show:function(a,b){return a.style.display=b?"":"none"},hide:function(a,b){return a.style.display=b?"none":""},html:function(a,b){return a.innerHTML=null!=b?b:""},value:{publishes:!0,bind:function(b){return a.Util.bindEvent(b,"change",this.publish)},unbind:function(b){return a.Util.unbindEvent(b,"change",this.publish)},routine:function(a,c){var d,e,f,h,i,j,k;if(null!=window.jQuery){if(a=b(a),(null!=c?c.toString():void 0)!==(null!=(h=a.val())?h.toString():void 0))return a.val(null!=c?c:"")}else if("select-multiple"===a.type){if(null!=c){for(k=[],e=0,f=a.length;f>e;e++)d=a[e],k.push(d.selected=(i=d.value,g.call(c,i)>=0));return k}}else if((null!=c?c.toString():void 0)!==(null!=(j=a.value)?j.toString():void 0))return a.value=null!=c?c:""}},text:function(a,b){return null!=a.innerText?a.innerText=null!=b?b:"":a.textContent=null!=b?b:""},"if":{block:!0,bind:function(a){var b,c;return null==this.marker?(b=["data",this.view.config.prefix,this.type].join("-").replace("--","-"),c=a.getAttribute(b),this.marker=document.createComment(" rivets: "+this.type+" "+c+" "),a.removeAttribute(b),a.parentNode.insertBefore(this.marker,a),a.parentNode.removeChild(a)):void 0},unbind:function(){var a;return null!=(a=this.nested)?a.unbind():void 0},routine:function(b,c){var d,e,f,g,h;if(!!c==(null==this.nested)){if(c){f={},h=this.view.models;for(d in h)e=h[d],f[d]=e;return g={binders:this.view.options.binders,formatters:this.view.options.formatters,config:this.view.options.config},(this.nested=new a.View(b,f,g)).bind(),this.marker.parentNode.insertBefore(b,this.marker.nextSibling)}return b.parentNode.removeChild(b),this.nested.unbind(),delete this.nested}},update:function(a){var b;return null!=(b=this.nested)?b.update(a):void 0}},unless:{block:!0,bind:function(b){return a.binders["if"].bind.call(this,b)},unbind:function(){return a.binders["if"].unbind.call(this)},routine:function(b,c){return a.binders["if"].routine.call(this,b,!c)},update:function(b){return a.binders["if"].update.call(this,b)}},"on-*":{"function":!0,unbind:function(b){return this.handler?a.Util.unbindEvent(b,this.args[0],this.handler):void 0},routine:function(b,c){
return this.handler&&a.Util.unbindEvent(b,this.args[0],this.handler),a.Util.bindEvent(b,this.args[0],this.handler=this.eventHandler(c))}},"each-*":{block:!0,bind:function(a){var b;return null==this.marker?(b=["data",this.view.config.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],a.removeAttribute(b),a.parentNode.insertBefore(this.marker,a),a.parentNode.removeChild(a)):void 0},unbind:function(a){var b,c,d,e,f;if(null!=this.iterated){for(e=this.iterated,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.unbind());return f}},routine:function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(j=this.args[0],c=c||[],this.iterated.length>c.length)for(t=Array(this.iterated.length-c.length),p=0,r=t.length;r>p;p++)e=t[p],o=this.iterated.pop(),o.unbind(),this.marker.parentNode.removeChild(o.els[0]);for(w=[],f=q=0,s=c.length;s>q;f=++q)if(i=c[f],d={},d[j]=i,null==this.iterated[f]){u=this.view.models;for(h in u)i=u[h],null==d[h]&&(d[h]=i);l=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,k={binders:this.view.options.binders,formatters:this.view.options.formatters,config:{}},v=this.view.options.config;for(g in v)n=v[g],k.config[g]=n;k.config.preloadData=!0,m=b.cloneNode(!0),o=new a.View(m,d,k),o.bind(),this.iterated.push(o),w.push(this.marker.parentNode.insertBefore(m,l.nextSibling))}else this.iterated[f].models[j]!==i?w.push(this.iterated[f].update(d)):w.push(void 0);return w},update:function(a){var b,c,d,e,f,g,h,i;b={};for(c in a)d=a[c],c!==this.args[0]&&(b[c]=d);for(h=this.iterated,i=[],f=0,g=h.length;g>f;f++)e=h[f],i.push(e.update(b));return i}},"class-*":function(a,b){var c;return c=" "+a.className+" ",!b==(-1!==c.indexOf(" "+this.args[0]+" "))?a.className=b?""+a.className+" "+this.args[0]:c.replace(" "+this.args[0]+" "," ").trim():void 0},"*":function(a,b){return b?a.setAttribute(this.type,b):a.removeAttribute(this.type)}},a.components={},a.config={preloadData:!0,handler:function(a,b,c){return this.call(a,b,c.view.models)}},a.formatters={},a.factory=function(b){return b._=a,b.binders=a.binders,b.components=a.components,b.formatters=a.formatters,b.config=a.config,b.configure=function(b){var c,d;null==b&&(b={});for(c in b)d=b[c],a.config[c]=d},b.bind=function(b,c,d){var e;return null==c&&(c={}),null==d&&(d={}),e=new a.View(b,c,d),e.bind(),e}},"object"==typeof exports?a.factory(exports):"function"==typeof define&&define.amd?define(["exports"],function(b){return a.factory(this.rivets=b),b}):a.factory(this.rivets={})}.call(this),function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice;b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a,b){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a,b){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a,b){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();return b===this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe))),b===this.fragment?!1:(this.iframe&&this.navigate(b),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),function(a){"function"==typeof define&&define.amd?define(["underscore","backbone"],a):a(_,Backbone)}(function(a,b){function c(b){var d={},e=g.keyPathSeparator;for(var f in b){var h=b[f];if(h&&h.constructor===Object&&!a.isEmpty(h)){var i=c(h);for(var j in i){var k=i[j];d[f+e+j]=k}}else d[f]=h}return d}function d(b,c,d){for(var e=g.keyPathSeparator,f=c.split(e),h=b,i=0,j=f.length;j>i;i++){if(d&&!a.has(h,f[i]))return!1;if(h=h[f[i]],null==h&&j-1>i&&(h={}),"undefined"==typeof h)return d?!0:h}return d?!0:h}function e(b,c,d,e){e=e||{};for(var f=g.keyPathSeparator,h=c.split(f),i=b,j=0,k=h.length;k>j&&void 0!==i;j++){var l=h[j];j===k-1?e.unset?delete i[l]:i[l]=d:("undefined"!=typeof i[l]&&a.isObject(i[l])||(i[l]={}),i=i[l])}}function f(a,b){e(a,b,null,{unset:!0})}var g=b.Model.extend({constructor:function(b,c){var d,e=b||{};this.cid=a.uniqueId("c"),this.attributes={},c&&c.collection&&(this.collection=c.collection),c&&c.parse&&(e=this.parse(e,c)||{}),(d=a.result(this,"defaults"))&&(e=a.deepExtend({},d,e)),this.set(e,c),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(b){return a.deepClone(this.attributes)},get:function(a){return d(this.attributes,a)},set:function(b,h,i){var j,k,l,m,n,o,p,q;if(null==b)return this;if("object"==typeof b?(k=b,i=h||{}):(k={})[b]=h,i||(i={}),!this._validate(k,i))return!1;l=i.unset,n=i.silent,m=[],o=this._changing,this._changing=!0,o||(this._previousAttributes=a.deepClone(this.attributes),this.changed={}),q=this.attributes,p=this._previousAttributes,this.idAttribute in k&&(this.id=k[this.idAttribute]),k=c(k);for(j in k)h=k[j],a.isEqual(d(q,j),h)||m.push(j),a.isEqual(d(p,j),h)?f(this.changed,j):e(this.changed,j,h),l?f(q,j):e(q,j,h);if(!n){m.length&&(this._pending=!0);for(var r=g.keyPathSeparator,s=0,t=m.length;t>s;s++){var b=m[s];this.trigger("change:"+b,this,d(q,b),i);for(var u=b.split(r),v=u.length-1;v>0;v--){var w=a.first(u,v).join(r),x=w+r+"*";this.trigger("change:"+x,this,d(q,w),i)}}}if(o)return this;if(!n)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},clear:function(b){var d={},e=c(this.attributes);for(var f in e)d[f]=void 0;return this.set(d,a.extend({},b,{unset:!0}))},hasChanged:function(b){return null==b?!a.isEmpty(this.changed):void 0!==d(this.changed,b)},changedAttributes:function(b){if(!b)return this.hasChanged()?c(this.changed):!1;var d=this._changing?this._previousAttributes:this.attributes;b=c(b),d=c(d);var e,f=!1;for(var g in b)a.isEqual(d[g],e=b[g])||((f||(f={}))[g]=e);return f},previous:function(a){return null!=a&&this._previousAttributes?d(this._previousAttributes,a):null},previousAttributes:function(){return a.deepClone(this._previousAttributes)}});return g.keyPathSeparator=".",b.DeepModel=g,"undefined"!=typeof module&&(module.exports=g),b}),!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b(require,exports,module):a.SVG=b()}(this,function(){function a(a){return a.toLowerCase().replace(/-(.)/g,function(a,b){return b.toUpperCase()})}function b(a){return a.charAt(0).toUpperCase()+a.slice(1)}function c(a){return 4==a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a}function d(a){var b=a.toString(16);return 1==b.length?"0"+b:b}function e(a,b,c){return null==c?c=a.height/a.width*b:null==b&&(b=a.width/a.height*c),{width:b,height:c}}function f(a,b,c){return{x:b*a.a+c*a.c+0,y:b*a.b+c*a.d+0}}function g(a){return{a:a[0],b:a[1],c:a[2],d:a[3],e:a[4],f:a[5]}}function h(a){return a instanceof p.Matrix||(a=new p.Matrix(a)),a}function i(a,b){a.cx=null==a.cx?b.bbox().cx:a.cx,a.cy=null==a.cy?b.bbox().cy:a.cy}function j(a){return a=a.replace(p.regex.whitespace,"").replace(p.regex.matrix,"").split(p.regex.matrixElements),g(p.utils.map(a,function(a){return parseFloat(a)}))}function k(a,b){return"number"==typeof a.from?a.from+(a.to-a.from)*b:a instanceof p.Color||a instanceof p.Number||a instanceof p.Matrix?a.at(b):1>b?a.from:a.to}function l(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b][0],null!=a[b][1]&&(d+=a[b][1],null!=a[b][2]&&(d+=" ",d+=a[b][2],null!=a[b][3]&&(d+=" ",d+=a[b][3],d+=" ",d+=a[b][4],null!=a[b][5]&&(d+=" ",d+=a[b][5],d+=" ",d+=a[b][6],null!=a[b][7]&&(d+=" ",d+=a[b][7])))));return d+" "}function m(a){for(var b=a.childNodes.length-1;b>=0;b--)a.childNodes[b]instanceof SVGElement&&m(a.childNodes[b]);return p.adopt(a).id(p.eid(a.nodeName))}function n(a){return null==a.x&&(a.x=0,a.y=0,a.width=0,a.height=0),a.w=a.width,a.h=a.height,a.x2=a.x+a.width,a.y2=a.y+a.height,a.cx=a.x+a.width/2,a.cy=a.y+a.height/2,a}function o(a){var b=a.toString().match(p.regex.reference);return b?b[1]:void 0}var p=this.SVG=function(a){return p.supported?(a=new p.Doc(a),p.parser||p.prepare(a),a):void 0};if(p.ns="http://www.w3.org/2000/svg",p.xmlns="http://www.w3.org/2000/xmlns/",p.xlink="http://www.w3.org/1999/xlink",p.supported=function(){return!!document.createElementNS&&!!document.createElementNS(p.ns,"svg").createSVGRect}(),!p.supported)return!1;p.did=1e3,p.eid=function(a){return"Svgjs"+b(a)+p.did++},p.create=function(a){var b=document.createElementNS(this.ns,a);return b.setAttribute("id",this.eid(a)),b},p.extend=function(){var a,b,c,d;for(a=[].slice.call(arguments),b=a.pop(),d=a.length-1;d>=0;d--)if(a[d])for(c in b)a[d].prototype[c]=b[c];p.Set&&p.Set.inherit&&p.Set.inherit()},p.invent=function(a){var b="function"==typeof a.create?a.create:function(){this.constructor.call(this,p.create(a.create))};return a.inherit&&(b.prototype=new a.inherit),a.extend&&p.extend(b,a.extend),a.construct&&p.extend(a.parent||p.Container,a.construct),b},p.adopt=function(a){if(a.instance)return a.instance;var c;return c="svg"==a.nodeName?a.parentNode instanceof SVGElement?new p.Nested:new p.Doc:"linearGradient"==a.nodeName?new p.Gradient("linear"):"radialGradient"==a.nodeName?new p.Gradient("radial"):p[b(a.nodeName)]?new(p[b(a.nodeName)]):new p.Element(a),c.type=a.nodeName,c.node=a,a.instance=c,c instanceof p.Doc&&c.namespace().defs(),c},p.prepare=function(a){var b=document.getElementsByTagName("body")[0],c=(b?new p.Doc(b):a.nested()).size(2,0),d=p.create("path");c.node.appendChild(d),p.parser={body:b||a.parent(),draw:c.style("opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),poly:c.polyline().node,path:d}},p.regex={unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,matrix:/matrix\(|\)/g,matrixElements:/,*\s+|,/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i},p.utils={map:function(a,b){var c,d=a.length,e=[];for(c=0;d>c;c++)e.push(b(a[c]));return e},radians:function(a){return a%360*Math.PI/180},degrees:function(a){return 180*a/Math.PI%360},filterSVGElements:function(a){return[].filter.call(a,function(a){return a instanceof SVGElement})}},p.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},p.Color=function(a){var b;this.r=0,this.g=0,this.b=0,"string"==typeof a?p.regex.isRgb.test(a)?(b=p.regex.rgb.exec(a.replace(/\s/g,"")),this.r=parseInt(b[1]),this.g=parseInt(b[2]),this.b=parseInt(b[3])):p.regex.isHex.test(a)&&(b=p.regex.hex.exec(c(a)),this.r=parseInt(b[1],16),this.g=parseInt(b[2],16),this.b=parseInt(b[3],16)):"object"==typeof a&&(this.r=a.r,this.g=a.g,this.b=a.b)},p.extend(p.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+d(this.r)+d(this.g)+d(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(a){return this.destination=new p.Color(a),this},at:function(a){return this.destination?(a=0>a?0:a>1?1:a,new p.Color({r:~~(this.r+(this.destination.r-this.r)*a),g:~~(this.g+(this.destination.g-this.g)*a),b:~~(this.b+(this.destination.b-this.b)*a)})):this}}),p.Color.test=function(a){return a+="",p.regex.isHex.test(a)||p.regex.isRgb.test(a)},p.Color.isRgb=function(a){return a&&"number"==typeof a.r&&"number"==typeof a.g&&"number"==typeof a.b},p.Color.isColor=function(a){return p.Color.isRgb(a)||p.Color.test(a)},p.Array=function(a,b){a=(a||[]).valueOf(),0==a.length&&b&&(a=b.valueOf()),this.value=this.parse(a)},p.extend(p.Array,{morph:function(a){if(this.destination=this.parse(a),this.value.length!=this.destination.length){for(var b=this.value[this.value.length-1],c=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(c);for(;this.value.length<this.destination.length;)this.value.push(b)}return this},settle:function(){for(var a=0,b=this.value.length,c=[];b>a;a++)-1==c.indexOf(this.value[a])&&c.push(this.value[a]);return this.value=c},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];c>b;b++)d.push(this.value[b]+(this.destination[b]-this.value[b])*a);return new p.Array(d)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(a){return a=a.valueOf(),Array.isArray(a)?a:this.split(a)},split:function(a){return a.trim().split(/\s+/)},reverse:function(){return this.value.reverse(),this}}),p.PointArray=function(a,b){this.constructor.call(this,a,b||[[0,0]])},p.PointArray.prototype=new p.Array,p.extend(p.PointArray,{toString:function(){for(var a=0,b=this.value.length,c=[];b>a;a++)c.push(this.value[a].join(","));return c.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(a){if(!this.destination)return this;for(var b=0,c=this.value.length,d=[];c>b;b++)d.push([this.value[b][0]+(this.destination[b][0]-this.value[b][0])*a,this.value[b][1]+(this.destination[b][1]-this.value[b][1])*a]);return new p.PointArray(d)},parse:function(a){if(a=a.valueOf(),
Array.isArray(a))return a;a=this.split(a);for(var b,c=0,d=a.length,e=[];d>c;c++)b=a[c].split(","),e.push([parseFloat(b[0]),parseFloat(b[1])]);return e},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d=this.value.length-1;d>=0;d--)this.value[d]=[this.value[d][0]+a,this.value[d][1]+b];return this},size:function(a,b){var c,d=this.bbox();for(c=this.value.length-1;c>=0;c--)this.value[c][0]=(this.value[c][0]-d.x)*a/d.width+d.x,this.value[c][1]=(this.value[c][1]-d.y)*b/d.height+d.y;return this},bbox:function(){return p.parser.poly.setAttribute("points",this.toString()),p.parser.poly.getBBox()}}),p.PathArray=function(a,b){this.constructor.call(this,a,b||[["M",0,0]])},p.PathArray.prototype=new p.Array,p.extend(p.PathArray,{toString:function(){return l(this.value)},move:function(a,b){var c=this.bbox();if(a-=c.x,b-=c.y,!isNaN(a)&&!isNaN(b))for(var d,e=this.value.length-1;e>=0;e--)d=this.value[e][0],"M"==d||"L"==d||"T"==d?(this.value[e][1]+=a,this.value[e][2]+=b):"H"==d?this.value[e][1]+=a:"V"==d?this.value[e][1]+=b:"C"==d||"S"==d||"Q"==d?(this.value[e][1]+=a,this.value[e][2]+=b,this.value[e][3]+=a,this.value[e][4]+=b,"C"==d&&(this.value[e][5]+=a,this.value[e][6]+=b)):"A"==d&&(this.value[e][6]+=a,this.value[e][7]+=b);return this},size:function(a,b){var c,d,e=this.bbox();for(c=this.value.length-1;c>=0;c--)d=this.value[c][0],"M"==d||"L"==d||"T"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y):"H"==d?this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x:"V"==d?this.value[c][1]=(this.value[c][1]-e.y)*b/e.height+e.y:"C"==d||"S"==d||"Q"==d?(this.value[c][1]=(this.value[c][1]-e.x)*a/e.width+e.x,this.value[c][2]=(this.value[c][2]-e.y)*b/e.height+e.y,this.value[c][3]=(this.value[c][3]-e.x)*a/e.width+e.x,this.value[c][4]=(this.value[c][4]-e.y)*b/e.height+e.y,"C"==d&&(this.value[c][5]=(this.value[c][5]-e.x)*a/e.width+e.x,this.value[c][6]=(this.value[c][6]-e.y)*b/e.height+e.y)):"A"==d&&(this.value[c][1]=this.value[c][1]*a/e.width,this.value[c][2]=this.value[c][2]*b/e.height,this.value[c][6]=(this.value[c][6]-e.x)*a/e.width+e.x,this.value[c][7]=(this.value[c][7]-e.y)*b/e.height+e.y);return this},parse:function(a){if(a instanceof p.PathArray)return a.valueOf();var b,c,d,e,f,g,h,i,j,k,m,n=0,o=0;for(p.parser.path.setAttribute("d","string"==typeof a?a:l(a)),m=p.parser.path.pathSegList,b=0,c=m.numberOfItems;c>b;++b)k=m.getItem(b),j=k.pathSegTypeAsLetter,"M"==j||"L"==j||"H"==j||"V"==j||"C"==j||"S"==j||"Q"==j||"T"==j||"A"==j?("x"in k&&(n=k.x),"y"in k&&(o=k.y)):("x1"in k&&(f=n+k.x1),"x2"in k&&(h=n+k.x2),"y1"in k&&(g=o+k.y1),"y2"in k&&(i=o+k.y2),"x"in k&&(n+=k.x),"y"in k&&(o+=k.y),"m"==j?m.replaceItem(p.parser.path.createSVGPathSegMovetoAbs(n,o),b):"l"==j?m.replaceItem(p.parser.path.createSVGPathSegLinetoAbs(n,o),b):"h"==j?m.replaceItem(p.parser.path.createSVGPathSegLinetoHorizontalAbs(n),b):"v"==j?m.replaceItem(p.parser.path.createSVGPathSegLinetoVerticalAbs(o),b):"c"==j?m.replaceItem(p.parser.path.createSVGPathSegCurvetoCubicAbs(n,o,f,g,h,i),b):"s"==j?m.replaceItem(p.parser.path.createSVGPathSegCurvetoCubicSmoothAbs(n,o,h,i),b):"q"==j?m.replaceItem(p.parser.path.createSVGPathSegCurvetoQuadraticAbs(n,o,f,g),b):"t"==j?m.replaceItem(p.parser.path.createSVGPathSegCurvetoQuadraticSmoothAbs(n,o),b):"a"==j?m.replaceItem(p.parser.path.createSVGPathSegArcAbs(n,o,k.r1,k.r2,k.angle,k.largeArcFlag,k.sweepFlag),b):("z"==j||"Z"==j)&&(n=d,o=e)),("M"==j||"m"==j)&&(d=n,e=o);for(a=[],m=p.parser.path.pathSegList,b=0,c=m.numberOfItems;c>b;++b)k=m.getItem(b),j=k.pathSegTypeAsLetter,n=[j],"M"==j||"L"==j||"T"==j?n.push(k.x,k.y):"H"==j?n.push(k.x):"V"==j?n.push(k.y):"C"==j?n.push(k.x1,k.y1,k.x2,k.y2,k.x,k.y):"S"==j?n.push(k.x2,k.y2,k.x,k.y):"Q"==j?n.push(k.x1,k.y1,k.x,k.y):"A"==j&&n.push(k.r1,k.r2,k.angle,0|k.largeArcFlag,0|k.sweepFlag,k.x,k.y),a.push(n);return a},bbox:function(){return p.parser.path.setAttribute("d",this.toString()),p.parser.path.getBBox()}}),p.Number=p.invent({create:function(a,b){this.value=0,this.unit=b||"","number"==typeof a?this.value=isNaN(a)?0:isFinite(a)?a:0>a?-3.4e38:3.4e38:"string"==typeof a?(b=a.match(p.regex.unit),b&&(this.value=parseFloat(b[1]),"%"==b[2]?this.value/=100:"s"==b[2]&&(this.value*=1e3),this.unit=b[2])):a instanceof p.Number&&(this.value=a.valueOf(),this.unit=a.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},valueOf:function(){return this.value},plus:function(a){return new p.Number(this+new p.Number(a),this.unit)},minus:function(a){return this.plus(-new p.Number(a))},times:function(a){return new p.Number(this*new p.Number(a),this.unit)},divide:function(a){return new p.Number(this/new p.Number(a),this.unit)},to:function(a){var b=new p.Number(this);return"string"==typeof a&&(b.unit=a),b},morph:function(a){return this.destination=new p.Number(a),this},at:function(a){return this.destination?new p.Number(this.destination).minus(this).times(a).plus(this):this}}}),p.ViewBox=function(a){var b,c,d,e,f=1,g=1,h=a.bbox(),i=(a.attr("viewBox")||"").match(/-?[\d\.]+/g),j=a,k=a;for(d=new p.Number(a.width()),e=new p.Number(a.height());"%"==d.unit;)f*=d.value,d=new p.Number(j instanceof p.Doc?j.parent().offsetWidth:j.parent().width()),j=j.parent();for(;"%"==e.unit;)g*=e.value,e=new p.Number(k instanceof p.Doc?k.parent().offsetHeight:k.parent().height()),k=k.parent();this.x=h.x,this.y=h.y,this.width=d*f,this.height=e*g,this.zoom=1,i&&(b=parseFloat(i[0]),c=parseFloat(i[1]),d=parseFloat(i[2]),e=parseFloat(i[3]),this.zoom=this.width/this.height>d/e?this.height/e:this.width/d,this.x=b,this.y=c,this.width=d,this.height=e)},p.extend(p.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),p.Element=p.invent({create:function(a){this._stroke=p.defaults.attrs.stroke,(this.node=a)&&(this.type=a.nodeName,this.node.instance=this,this._stroke=a.getAttribute("stroke")||this._stroke)},extend:{x:function(a){return this.attr("x",a)},y:function(a){return this.attr("y",a)},cx:function(a){return null==a?this.x()+this.width()/2:this.x(a-this.width()/2)},cy:function(a){return null==a?this.y()+this.height()/2:this.y(a-this.height()/2)},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},width:function(a){return this.attr("width",a)},height:function(a){return this.attr("height",a)},size:function(a,b){var c=e(this.bbox(),a,b);return this.width(new p.Number(c.width)).height(new p.Number(c.height))},clone:function(){var a=m(this.node.cloneNode(!0));return this.after(a),a},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(a){return this.after(a).remove(),a},addTo:function(a){return a.put(this)},putIn:function(a){return a.add(this)},id:function(a){return this.attr("id",a)},inside:function(a,b){var c=this.bbox();return a>c.x&&b>c.y&&a<c.x+c.width&&b<c.y+c.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var a=this.attr("class");return null==a?[]:a.trim().split(/\s+/)},hasClass:function(a){return-1!=this.classes().indexOf(a)},addClass:function(a){if(!this.hasClass(a)){var b=this.classes();b.push(a),this.attr("class",b.join(" "))}return this},removeClass:function(a){return this.hasClass(a)&&this.attr("class",this.classes().filter(function(b){return b!=a}).join(" ")),this},toggleClass:function(a){return this.hasClass(a)?this.removeClass(a):this.addClass(a)},reference:function(a){return p.get(this.attr(a))},parent:function(a){if(this.node.parentNode){var b=p.adopt(this.node.parentNode);if(a)for(;!(b instanceof a)&&b.node.parentNode instanceof SVGElement;)b=p.adopt(b.node.parentNode);return b}},doc:function(){return this instanceof p.Doc?this:this.parent(p.Doc)},"native":function(){return this.node},svg:function(a){var b=document.createElement("svg");if(!(a&&this instanceof p.Parent))return b.appendChild(a=document.createElement("svg")),a.appendChild(this.node.cloneNode(!0)),b.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");b.innerHTML="<svg>"+a.replace(/\n/,"").replace(/<(\w+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var c=0,d=b.firstChild.childNodes.length;d>c;c++)this.node.appendChild(b.firstChild.firstChild);return this}}}),p.FX=p.invent({create:function(a){this.target=a},extend:{animate:function(a,b,c){var d,e,f,g=this.target,h=this;return"object"==typeof a&&(c=a.delay,b=a.ease,a=a.duration),a="="==a?a:null==a?1e3:new p.Number(a).valueOf(),b=b||"<>",h.at=function(a){var c;if(a=0>a?0:a>1?1:a,null==d){d=[];for(f in h.attrs)d.push(f);if(g.morphArray&&(h.destination.plot||d.indexOf("points")>-1)){var i,j=new g.morphArray(h.destination.plot||h.attrs.points||g.array());h.destination.size&&j.size(h.destination.size.width.to,h.destination.size.height.to),i=j.bbox(),h.destination.x?j.move(h.destination.x.to,i.y):h.destination.cx&&j.move(h.destination.cx.to-i.width/2,i.y),i=j.bbox(),h.destination.y?j.move(i.x,h.destination.y.to):h.destination.cy&&j.move(i.x,h.destination.cy.to-i.height/2),h.destination={plot:g.array().morph(j)}}}if(null==e){e=[];for(f in h.styles)e.push(f)}for(a="<>"==b?-Math.cos(a*Math.PI)/2+.5:">"==b?Math.sin(a*Math.PI/2):"<"==b?-Math.cos(a*Math.PI/2)+1:"-"==b?a:"function"==typeof b?b(a):a,h.destination.plot?g.plot(h.destination.plot.at(a)):(h.destination.x?g.x(h.destination.x.at(a)):h.destination.cx&&g.cx(h.destination.cx.at(a)),h.destination.y?g.y(h.destination.y.at(a)):h.destination.cy&&g.cy(h.destination.cy.at(a)),h.destination.size&&g.size(h.destination.size.width.at(a),h.destination.size.height.at(a))),h.destination.viewbox&&g.viewbox(h.destination.viewbox.x.at(a),h.destination.viewbox.y.at(a),h.destination.viewbox.width.at(a),h.destination.viewbox.height.at(a)),h.destination.leading&&g.leading(h.destination.leading.at(a)),c=d.length-1;c>=0;c--)g.attr(d[c],k(h.attrs[d[c]],a));for(c=e.length-1;c>=0;c--)g.style(e[c],k(h.styles[e[c]],a));h.situation.during&&h.situation.during.call(g,a,function(b,c){return k({from:b,to:c},a)})},"number"==typeof a&&(this.timeout=setTimeout(function(){var d=(new Date).getTime();h.situation.start=d,h.situation.play=!0,h.situation.finish=d+a,h.situation.duration=a,h.situation.ease=b,h.render=function(){if(h.situation.play===!0){var d=(new Date).getTime(),e=d>h.situation.finish?1:(d-h.situation.start)/a;h.situation.reversing&&(e=-e+1),h.at(e),d>h.situation.finish?(h.destination.plot&&g.plot(new p.PointArray(h.destination.plot.destination).settle()),h.situation.loop===!0||"number"==typeof h.situation.loop&&h.situation.loop>0?(h.situation.reverse&&(h.situation.reversing=!h.situation.reversing),"number"==typeof h.situation.loop&&((!h.situation.reverse||h.situation.reversing)&&--h.situation.loop,h.situation.reverse||1!=h.situation.loop||--h.situation.loop),h.animate(a,b,c)):h.situation.after?h.situation.after.apply(g,[h]):h.stop()):h.animationFrame=requestAnimationFrame(h.render)}else h.animationFrame=requestAnimationFrame(h.render)},h.render()},new p.Number(c).valueOf())),this},bbox:function(){return this.target.bbox()},attr:function(a,b){if("object"==typeof a)for(var c in a)this.attr(c,a[c]);else{var d=this.target.attr(a);"transform"==a?(this.attrs[a]&&(b=this.attrs[a].destination.multiply(b)),this.attrs[a]=this.target.ctm().morph(b),this.param&&(b=this.target.transform("rotation"),this.attrs[a].param={from:this.target.param||{rotation:b,cx:this.param.cx,cy:this.param.cy},to:this.param})):this.attrs[a]=p.Color.isColor(b)?new p.Color(d).morph(b):p.regex.unit.test(b)?new p.Number(d).morph(b):{from:d,to:b}}return this},style:function(a,b){if("object"==typeof a)for(var c in a)this.style(c,a[c]);else this.styles[a]={from:this.target.style(a),to:b};return this},x:function(a){return this.destination.x=new p.Number(this.target.x()).morph(a),this},y:function(a){return this.destination.y=new p.Number(this.target.y()).morph(a),this},cx:function(a){return this.destination.cx=new p.Number(this.target.cx()).morph(a),this},cy:function(a){return this.destination.cy=new p.Number(this.target.cy()).morph(a),this},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){if(this.target instanceof p.Text)this.attr("font-size",a);else{var c=this.target.bbox();this.destination.size={width:new p.Number(c.width).morph(a),height:new p.Number(c.height).morph(b)}}return this},plot:function(a){return this.destination.plot=a,this},leading:function(a){return this.target.destination.leading&&(this.destination.leading=new p.Number(this.target.destination.leading).morph(a)),this},viewbox:function(a,b,c,d){if(this.target instanceof p.Container){var e=this.target.viewbox();this.destination.viewbox={x:new p.Number(e.x).morph(a),y:new p.Number(e.y).morph(b),width:new p.Number(e.width).morph(c),height:new p.Number(e.height).morph(d)}}return this},update:function(a){return this.target instanceof p.Stop&&(null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new p.Number(a.offset))),this},during:function(a){return this.situation.during=a,this},after:function(a){return this.situation.after=a,this},loop:function(a,b){return this.situation.loop=this.situation.loops=a||!0,this.situation.reverse=!!b,this},stop:function(a){return a===!0?(this.animate(0),this.situation.after&&this.situation.after.apply(this.target,[this])):(clearTimeout(this.timeout),cancelAnimationFrame(this.animationFrame),this.attrs={},this.styles={},this.situation={},this.destination={}),this},pause:function(){return this.situation.play===!0&&(this.situation.play=!1,this.situation.pause=(new Date).getTime()),this},play:function(){if(this.situation.play===!1){var a=(new Date).getTime()-this.situation.pause;this.situation.finish+=a,this.situation.start+=a,this.situation.play=!0}return this}},parent:p.Element,construct:{animate:function(a,b,c){return(this.fx||(this.fx=new p.FX(this))).stop().animate(a,b,c)},stop:function(a){return this.fx&&this.fx.stop(a),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this}}}),p.BBox=p.invent({create:function(a){if(a){var b;try{b=a.node.getBBox()}catch(c){b={x:a.node.clientLeft,y:a.node.clientTop,width:a.node.clientWidth,height:a.node.clientHeight}}this.x=b.x,this.y=b.y,this.width=b.width,this.height=b.height}n(this)},parent:p.Element,construct:{bbox:function(){return new p.BBox(this)}}}),p.TBox=p.invent({create:function(a){if(a){var b=a.ctm().extract(),c=a.bbox();this.width=c.width*b.scaleX,this.height=c.height*b.scaleY,this.x=c.x+b.x,this.y=c.y+b.y}n(this)},parent:p.Element,construct:{tbox:function(){return new p.TBox(this)}}}),p.RBox=p.invent({create:function(a){if(a){var b=a.doc().parent(),c=a.node.getBoundingClientRect(),d=1;for(this.x=c.left,this.y=c.top,this.x-=b.offsetLeft,this.y-=b.offsetTop;b=b.offsetParent;)this.x-=b.offsetLeft,this.y-=b.offsetTop;for(b=a;b.parent&&(b=b.parent());)b.viewbox&&(d*=b.viewbox().zoom,this.x-=b.x()||0,this.y-=b.y()||0);this.width=c.width/=d,this.height=c.height/=d}n(this),this.x+=window.scrollX,this.y+=window.scrollY},parent:p.Element,construct:{rbox:function(){return new p.RBox(this)}}}),[p.BBox,p.TBox,p.RBox].forEach(function(a){p.extend(a,{merge:function(b){var c=new a;return c.x=Math.min(this.x,b.x),c.y=Math.min(this.y,b.y),c.width=Math.max(this.x+this.width,b.x+b.width)-c.x,c.height=Math.max(this.y+this.height,b.y+b.height)-c.y,n(c)}})}),p.Matrix=p.invent({create:function(a){var b,c=g([1,0,0,1,0,0]);for(a=a instanceof p.Element?a.matrixify():"string"==typeof a?j(a):6==arguments.length?g([].slice.call(arguments)):"object"==typeof a?a:c,b=r.length-1;b>=0;b--)this[r[b]]=a&&"number"==typeof a[r[b]]?a[r[b]]:c[r[b]]},extend:{extract:function(){var a=f(this,0,1),b=f(this,1,0),c=180/Math.PI*Math.atan2(a.y,a.x)-90;return{x:this.e,y:this.f,skewX:-c,skewY:180/Math.PI*Math.atan2(b.y,b.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:c}},clone:function(){return new p.Matrix(this)},morph:function(a){return this.destination=new p.Matrix(a),this},at:function(a){if(!this.destination)return this;var b=new p.Matrix({a:this.a+(this.destination.a-this.a)*a,b:this.b+(this.destination.b-this.b)*a,c:this.c+(this.destination.c-this.c)*a,d:this.d+(this.destination.d-this.d)*a,e:this.e+(this.destination.e-this.e)*a,f:this.f+(this.destination.f-this.f)*a});if(this.param&&this.param.to){var c={rotation:this.param.from.rotation+(this.param.to.rotation-this.param.from.rotation)*a,cx:this.param.from.cx,cy:this.param.from.cy};b=b.rotate((this.param.to.rotation-2*this.param.from.rotation)*a,c.cx,c.cy),b.param=c}return b},multiply:function(a){return new p.Matrix(this["native"]().multiply(h(a)["native"]()))},inverse:function(){return new p.Matrix(this["native"]().inverse())},translate:function(a,b){return new p.Matrix(this["native"]().translate(a||0,b||0))},scale:function(a,b,c,d){return(1==arguments.length||3==arguments.length)&&(b=a),3==arguments.length&&(d=c,c=b),this.around(c,d,new p.Matrix(a,0,0,b,0,0))},rotate:function(a,b,c){return a=p.utils.radians(a),this.around(b,c,new p.Matrix(Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),0,0))},flip:function(a,b){return"x"==a?this.scale(-1,1,b,0):this.scale(1,-1,0,b)},skew:function(a,b,c,d){return this.around(c,d,this["native"]().skewX(a||0).skewY(b||0))},skewX:function(a,b,c){return this.around(b,c,this["native"]().skewX(a||0))},skewY:function(a,b,c){return this.around(b,c,this["native"]().skewY(a||0))},around:function(a,b,c){return this.multiply(new p.Matrix(1,0,0,1,a||0,b||0)).multiply(c).multiply(new p.Matrix(1,0,0,1,-a||0,-b||0))},"native":function(){for(var a=p.parser.draw.node.createSVGMatrix(),b=r.length-1;b>=0;b--)a[r[b]]=this[r[b]];return a},toString:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},parent:p.Element,construct:{ctm:function(){return new p.Matrix(this.node.getCTM())}}}),p.extend(p.Element,{attr:function(a,b,c){if(null==a){for(a={},b=this.node.attributes,c=b.length-1;c>=0;c--)a[b[c].nodeName]=p.regex.isNumber.test(b[c].nodeValue)?parseFloat(b[c].nodeValue):b[c].nodeValue;return a}if("object"==typeof a)for(b in a)this.attr(b,a[b]);else if(null===b)this.node.removeAttribute(a);else{if(null==b)return b=this.node.getAttribute(a),null==b?p.defaults.attrs[a]:p.regex.isNumber.test(b)?parseFloat(b):b;"stroke-width"==a?this.attr("stroke",parseFloat(b)>0?this._stroke:null):"stroke"==a&&(this._stroke=b),("fill"==a||"stroke"==a)&&(p.regex.isImage.test(b)&&(b=this.doc().defs().image(b,0,0)),b instanceof p.Image&&(b=this.doc().defs().pattern(0,0,function(){this.add(b)}))),"number"==typeof b?b=new p.Number(b):p.Color.isColor(b)?b=new p.Color(b):Array.isArray(b)?b=new p.Array(b):b instanceof p.Matrix&&b.param&&(this.param=b.param),"leading"==a?this.leading&&this.leading(b):"string"==typeof c?this.node.setAttributeNS(c,a,b.toString()):this.node.setAttribute(a,b.toString()),!this.rebuild||"font-size"!=a&&"x"!=a||this.rebuild(a,b)}return this}}),p.extend(p.Element,p.FX,{transform:function(a,b){var c,d=this.target||this;if("object"!=typeof a)return c=new p.Matrix(d).extract(),"object"==typeof this.param&&(c.rotation=this.param.rotation,c.cx=this.param.cx,c.cy=this.param.cy),"string"==typeof a?c[a]:c;if(c=this instanceof p.FX&&this.attrs.transform?this.attrs.transform:new p.Matrix(d),b=!!b||!!a.relative,null!=a.a)c=b?c.multiply(new p.Matrix(a)):new p.Matrix(a);else if(null!=a.rotation)i(a,d),b&&(a.rotation+=this.param&&null!=this.param.rotation?this.param.rotation:c.extract().rotation),this.param=a,this instanceof p.Element&&(c=b?c.rotate(a.rotation,a.cx,a.cy):c.rotate(a.rotation-c.extract().rotation,a.cx,a.cy));else if(null!=a.scale||null!=a.scaleX||null!=a.scaleY){if(i(a,d),a.scaleX=null!=a.scale?a.scale:null!=a.scaleX?a.scaleX:1,a.scaleY=null!=a.scale?a.scale:null!=a.scaleY?a.scaleY:1,!b){var e=c.extract();a.scaleX=1*a.scaleX/e.scaleX,a.scaleY=1*a.scaleY/e.scaleY}c=c.scale(a.scaleX,a.scaleY,a.cx,a.cy)}else if(null!=a.skewX||null!=a.skewY){if(i(a,d),a.skewX=null!=a.skewX?a.skewX:0,a.skewY=null!=a.skewY?a.skewY:0,!b){var e=c.extract();c=c.multiply((new p.Matrix).skew(e.skewX,e.skewY,a.cx,a.cy).inverse())}c=c.skew(a.skewX,a.skewY,a.cx,a.cy)}else a.flip?c=c.flip(a.flip,null==a.offset?d.bbox()["c"+a.flip]:a.offset):(null!=a.x||null!=a.y)&&(b?c=c.translate(a.x,a.y):(null!=a.x&&(c.e=a.x),null!=a.y&&(c.f=a.y)));return this.attr(this instanceof p.Pattern?"patternTransform":this instanceof p.Gradient?"gradientTransform":"transform",c)}}),p.extend(p.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var a=(this.attr("transform")||"").split(/\)\s*/).slice(0,-1).map(function(a){var b=a.trim().split("(");return[b[0],b[1].split(p.regex.matrixElements).map(function(a){return parseFloat(a)})]}).reduce(function(a,b){return"matrix"==b[0]?a.multiply(g(b[1])):a[b[0]].apply(a,b[1])},new p.Matrix);return this.attr("transform",a),a}}),p.extend(p.Element,{style:function(b,c){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"==typeof b)for(c in b)this.style(c,b[c]);else{if(!p.regex.isCss.test(b))return this.node.style[a(b)];b=b.split(";");for(var d=0;d<b.length;d++)c=b[d].split(":"),this.style(c[0].replace(/\s+/g,""),c[1])}else this.node.style[a(b)]=null===c||p.regex.isBlank.test(c)?"":c;return this}}),p.Parent=p.invent({create:function(a){this.constructor.call(this,a)},inherit:p.Element,extend:{children:function(){return p.utils.map(p.utils.filterSVGElements(this.node.childNodes),function(a){return p.adopt(a)})},add:function(a,b){return this.has(a)||(b=null==b?this.children().length:b,this.node.insertBefore(a.node,this.node.childNodes[b]||null)),this},put:function(a,b){return this.add(a,b),a},has:function(a){return this.index(a)>=0},index:function(a){return this.children().indexOf(a)},get:function(a){return this.children()[a]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(a,b){var c,d,e=this.children();for(c=0,d=e.length;d>c;c++)e[c]instanceof p.Element&&a.apply(e[c],[c,e]),b&&e[c]instanceof p.Container&&e[c].each(a,b);return this},removeElement:function(a){return this.node.removeChild(a.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),p.Container=p.invent({create:function(a){this.constructor.call(this,a)},inherit:p.Parent,extend:{viewbox:function(a){return 0==arguments.length?new p.ViewBox(this):(a=1==arguments.length?[a.x,a.y,a.width,a.height]:[].slice.call(arguments),this.attr("viewBox",a))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(a){p.Element.prototype[a]=function(b){var c=this;return this.node["on"+a]="function"==typeof b?function(){return b.apply(c,arguments)}:null,this}}),p.listeners=[],p.handlerMap=[],p.on=function(a,b,c){var d=c.bind(a.instance||a),e=(p.handlerMap.indexOf(a)+1||p.handlerMap.push(a))-1,f=b.split(".")[0],g=b.split(".")[1]||"*";p.listeners[e]=p.listeners[e]||{},p.listeners[e][f]=p.listeners[e][f]||{},p.listeners[e][f][g]=p.listeners[e][f][g]||{},p.listeners[e][f][g][c]=d,a.addEventListener(f,d,!1)},p.off=function(a,b,c){var d=p.handlerMap.indexOf(a),e=b&&b.split(".")[0],f=b&&b.split(".")[1];if(-1!=d)if(c)p.listeners[d][e]&&p.listeners[d][e][f||"*"]&&(a.removeEventListener(e,p.listeners[d][e][f||"*"][c],!1),delete p.listeners[d][e][f||"*"][c]);else if(f&&e){if(p.listeners[d][e]&&p.listeners[d][e][f]){for(c in p.listeners[d][e][f])p.off(a,[e,f].join("."),c);delete p.listeners[d][e][f]}}else if(f)for(b in p.listeners[d])for(namespace in p.listeners[d][b])f===namespace&&p.off(a,[b,f].join("."));else if(e){if(p.listeners[d][e]){for(namespace in p.listeners[d][e])p.off(a,[e,namespace].join("."));delete p.listeners[d][e]}}else{for(b in p.listeners[d])p.off(a,b);delete p.listeners[d]}},p.extend(p.Element,{on:function(a,b){return p.on(this.node,a,b),this},off:function(a,b){return p.off(this.node,a,b),this},fire:function(a,b){return a instanceof Event?this.node.dispatchEvent(a):this.node.dispatchEvent(new s(a,{detail:b})),this}}),p.Defs=p.invent({create:"defs",inherit:p.Container}),p.G=p.invent({create:"g",inherit:p.Container,extend:{x:function(a){return null==a?this.transform("x"):this.transform({x:-this.x()+a},!0)},y:function(a){return null==a?this.transform("y"):this.transform({y:-this.y()+a},!0)},cx:function(a){return null==a?this.tbox().cx:this.x(a-this.tbox().width/2)},cy:function(a){return null==a?this.tbox().cy:this.y(a-this.tbox().height/2)}},construct:{group:function(){return this.put(new p.G)}}}),p.extend(p.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var a=this.position()+1,b=this.parent();return b.removeElement(this).add(this,a),b instanceof p.Doc&&b.node.appendChild(b.defs().node),this},backward:function(){var a=this.position();return a>0&&this.parent().removeElement(this).add(this,a-1),this},front:function(){var a=this.parent();return a.node.appendChild(this.node),a instanceof p.Doc&&a.node.appendChild(a.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(a){a.remove();var b=this.position();return this.parent().add(a,b),this},after:function(a){a.remove();var b=this.position();return this.parent().add(a,b+1),this}}),p.Mask=p.invent({create:function(){this.constructor.call(this,p.create("mask")),this.targets=[]},inherit:p.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unmask();return delete this.targets,this.parent().removeElement(this),this}},construct:{mask:function(){return this.defs().put(new p.Mask)}}}),p.extend(p.Element,{maskWith:function(a){return this.masker=a instanceof p.Mask?a:this.parent().mask().add(a),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),p.ClipPath=p.invent({create:function(){this.constructor.call(this,p.create("clipPath")),this.targets=[]},inherit:p.Container,extend:{remove:function(){for(var a=this.targets.length-1;a>=0;a--)this.targets[a]&&this.targets[a].unclip();return delete this.targets,this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new p.ClipPath)}}}),p.extend(p.Element,{clipWith:function(a){return this.clipper=a instanceof p.ClipPath?a:this.parent().clip().add(a),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),p.Gradient=p.invent({create:function(a){this.constructor.call(this,p.create(a+"Gradient")),this.type=a},inherit:p.Container,extend:{at:function(a,b,c){return this.put(new p.Stop).update(a,b,c)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()}},construct:{gradient:function(a,b){return this.defs().gradient(a,b)}}}),p.extend(p.Gradient,p.FX,{from:function(a,b){return"radial"==(this.target||this).type?this.attr({fx:new p.Number(a),fy:new p.Number(b)}):this.attr({x1:new p.Number(a),y1:new p.Number(b)})},to:function(a,b){return"radial"==(this.target||this).type?this.attr({cx:new p.Number(a),cy:new p.Number(b)}):this.attr({x2:new p.Number(a),y2:new p.Number(b)})}}),p.extend(p.Defs,{gradient:function(a,b){return this.put(new p.Gradient(a)).update(b)}}),p.Stop=p.invent({create:"stop",inherit:p.Element,extend:{update:function(a){return("number"==typeof a||a instanceof p.Number)&&(a={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=a.opacity&&this.attr("stop-opacity",a.opacity),null!=a.color&&this.attr("stop-color",a.color),null!=a.offset&&this.attr("offset",new p.Number(a.offset)),this}}}),p.Pattern=p.invent({create:"pattern",inherit:p.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return this.fill()}},construct:{pattern:function(a,b,c){return this.defs().pattern(a,b,c)}}}),p.extend(p.Defs,{pattern:function(a,b,c){return this.put(new p.Pattern).update(c).attr({x:0,y:0,width:a,height:b,patternUnits:"userSpaceOnUse"})}}),p.Doc=p.invent({create:function(a){a&&(a="string"==typeof a?document.getElementById(a):a,"svg"==a.nodeName?this.constructor.call(this,a):(this.constructor.call(this,p.create("svg")),a.appendChild(this.node)),this.namespace().size("100%","100%").defs())},inherit:p.Container,extend:{namespace:function(){return this.attr({xmlns:p.ns,version:"1.1"}).attr("xmlns:xlink",p.xlink,p.xmlns)},defs:function(){if(!this._defs){var a;this._defs=(a=this.node.getElementsByTagName("defs")[0])?p.adopt(a):new p.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return"#document"==this.node.parentNode.nodeName?null:this.node.parentNode},spof:function(){var a=this.node.getScreenCTM();return a&&this.style("left",-a.e%1+"px").style("top",-a.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this}}}),p.Shape=p.invent({create:function(a){this.constructor.call(this,a)},inherit:p.Element}),p.Bare=p.invent({create:function(a,b){if(this.constructor.call(this,p.create(a)),b)for(var c in b.prototype)"function"==typeof b.prototype[c]&&(this[c]=b.prototype[c])},inherit:p.Element,extend:{words:function(a){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(document.createTextNode(a)),this}}}),p.extend(p.Parent,{element:function(a,b){return this.put(new p.Bare(a,b))},symbol:function(){return this.defs().element("symbol",p.Container)}}),p.Use=p.invent({create:"use",inherit:p.Shape,extend:{element:function(a,b){return this.attr("href",(b||"")+"#"+a,p.xlink)}},construct:{use:function(a,b){return this.put(new p.Use).element(a,b)}}}),p.Rect=p.invent({create:"rect",inherit:p.Shape,construct:{rect:function(a,b){return this.put((new p.Rect).size(a,b))}}}),p.Circle=p.invent({create:"circle",inherit:p.Shape,construct:{circle:function(a){return this.put(new p.Circle).rx(new p.Number(a).divide(2)).move(0,0)}}}),p.extend(p.Circle,p.FX,{rx:function(a){return this.attr("r",a)},ry:function(a){return this.rx(a)}}),p.Ellipse=p.invent({create:"ellipse",inherit:p.Shape,construct:{ellipse:function(a,b){return this.put(new p.Ellipse).size(a,b).move(0,0)}}}),p.extend(p.Ellipse,p.Rect,p.FX,{rx:function(a){return this.attr("rx",a)},ry:function(a){return this.attr("ry",a)}}),p.extend(p.Circle,p.Ellipse,{x:function(a){return null==a?this.cx()-this.rx():this.cx(a+this.rx())},y:function(a){return null==a?this.cy()-this.ry():this.cy(a+this.ry())},cx:function(a){return null==a?this.attr("cx"):this.attr("cx",a)},cy:function(a){return null==a?this.attr("cy"):this.attr("cy",a)},width:function(a){return null==a?2*this.rx():this.rx(new p.Number(a).divide(2))},height:function(a){return null==a?2*this.ry():this.ry(new p.Number(a).divide(2))},size:function(a,b){var c=e(this.bbox(),a,b);return this.rx(new p.Number(c.width).divide(2)).ry(new p.Number(c.height).divide(2))}}),p.Line=p.invent({create:"line",inherit:p.Shape,extend:{array:function(){return new p.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(a,b,c,d){return a=4==arguments.length?{x1:a,y1:b,x2:c,y2:d}:new p.PointArray(a).toLine(),this.attr(a)},move:function(a,b){
return this.attr(this.array().move(a,b).toLine())},size:function(a,b){var c=e(this.bbox(),a,b);return this.attr(this.array().size(c.width,c.height).toLine())}},construct:{line:function(a,b,c,d){return this.put(new p.Line).plot(a,b,c,d)}}}),p.Polyline=p.invent({create:"polyline",inherit:p.Shape,construct:{polyline:function(a){return this.put(new p.Polyline).plot(a)}}}),p.Polygon=p.invent({create:"polygon",inherit:p.Shape,construct:{polygon:function(a){return this.put(new p.Polygon).plot(a)}}}),p.extend(p.Polyline,p.Polygon,{array:function(){return this._array||(this._array=new p.PointArray(this.attr("points")))},plot:function(a){return this.attr("points",this._array=new p.PointArray(a))},move:function(a,b){return this.attr("points",this.array().move(a,b))},size:function(a,b){var c=e(this.bbox(),a,b);return this.attr("points",this.array().size(c.width,c.height))}}),p.extend(p.Line,p.Polyline,p.Polygon,{morphArray:p.PointArray,x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},width:function(a){var b=this.bbox();return null==a?b.width:this.size(a,b.height)},height:function(a){var b=this.bbox();return null==a?b.height:this.size(b.width,a)}}),p.Path=p.invent({create:"path",inherit:p.Shape,extend:{morphArray:p.PathArray,array:function(){return this._array||(this._array=new p.PathArray(this.attr("d")))},plot:function(a){return this.attr("d",this._array=new p.PathArray(a))},move:function(a,b){return this.attr("d",this.array().move(a,b))},x:function(a){return null==a?this.bbox().x:this.move(a,this.bbox().y)},y:function(a){return null==a?this.bbox().y:this.move(this.bbox().x,a)},size:function(a,b){var c=e(this.bbox(),a,b);return this.attr("d",this.array().size(c.width,c.height))},width:function(a){return null==a?this.bbox().width:this.size(a,this.bbox().height)},height:function(a){return null==a?this.bbox().height:this.size(this.bbox().width,a)}},construct:{path:function(a){return this.put(new p.Path).plot(a)}}}),p.Image=p.invent({create:"image",inherit:p.Shape,extend:{load:function(a){if(!a)return this;var b=this,c=document.createElement("img");return c.onload=function(){var d=b.parent(p.Pattern);0==b.width()&&0==b.height()&&b.size(c.width,c.height),d&&0==d.width()&&0==d.height()&&d.size(b.width(),b.height()),"function"==typeof b._loaded&&b._loaded.call(b,{width:c.width,height:c.height,ratio:c.width/c.height,url:a})},this.attr("href",c.src=this.src=a,p.xlink)},loaded:function(a){return this._loaded=a,this}},construct:{image:function(a,b,c){return this.put(new p.Image).load(a).size(b||0,c||b||0)}}}),p.Text=p.invent({create:function(){this.constructor.call(this,p.create("text")),this._leading=new p.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",p.defaults.attrs["font-family"])},inherit:p.Shape,extend:{clone:function(){var a=m(this.node.cloneNode(!0));return a.lines().each(function(){this.newLined=!0}),this.after(a),a},x:function(a){return null==a?this.attr("x"):(this.textPath||this.lines().each(function(){this.newLined&&this.x(a)}),this.attr("x",a))},y:function(a){var b=this.attr("y"),c="number"==typeof b?b-this.bbox().y:0;return null==a?"number"==typeof b?b-c:b:this.attr("y","number"==typeof a?a+c:a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)},text:function(a){if("undefined"==typeof a)return this.content;if(this.clear().build(!0),"function"==typeof a)a.call(this,this);else{a=(this.content=a).split("\n");for(var b=0,c=a.length;c>b;b++)this.tspan(a[b]).newLine()}return this.build(!1).rebuild()},size:function(a){return this.attr("font-size",a).rebuild()},leading:function(a){return null==a?this._leading:(this._leading=new p.Number(a),this.rebuild())},lines:function(){var a=p.utils.map(p.utils.filterSVGElements(this.node.childNodes),function(a){return p.adopt(a)});return new p.Set(a)},rebuild:function(a){if("boolean"==typeof a&&(this._rebuild=a),this._rebuild){var b=this;this.lines().each(function(){this.newLined&&(this.textPath||this.attr("x",b.attr("x")),this.attr("dy",b._leading*new p.Number(b.attr("font-size"))))}),this.fire("rebuild")}return this},build:function(a){return this._build=!!a,this}},construct:{text:function(a){return this.put(new p.Text).text(a)},plain:function(a){return this.put(new p.Text).plain(a)}}}),p.Tspan=p.invent({create:"tspan",inherit:p.Shape,extend:{text:function(a){return"function"==typeof a?a.call(this,this):this.plain(a),this},dx:function(a){return this.attr("dx",a)},dy:function(a){return this.attr("dy",a)},newLine:function(){var a=this.parent(p.Text);return this.newLined=!0,this.dy(a._leading*a.attr("font-size")).attr("x",a.x())}}}),p.extend(p.Text,p.Tspan,{plain:function(a){return this._build===!1&&this.clear(),this.node.appendChild(document.createTextNode(this.content=a)),this},tspan:function(a){var b=(this.textPath()||this).node,c=new p.Tspan;return this._build===!1&&this.clear(),b.appendChild(c.node),c.text(a)},clear:function(){for(var a=(this.textPath()||this).node;a.hasChildNodes();)a.removeChild(a.lastChild);return this instanceof p.Text&&(this.content=""),this},length:function(){return this.node.getComputedTextLength()}}),p.TextPath=p.invent({create:"textPath",inherit:p.Element,parent:p.Text,construct:{path:function(a){for(var b=new p.TextPath,c=this.doc().defs().path(a);this.node.hasChildNodes();)b.node.appendChild(this.node.firstChild);return this.node.appendChild(b.node),b.attr("href","#"+c,p.xlink),this},plot:function(a){var b=this.track();return b&&b.plot(a),this},track:function(){var a=this.textPath();return a?a.reference("href"):void 0},textPath:function(){return this.node.firstChild&&"textPath"==this.node.firstChild.nodeName?p.adopt(this.node.firstChild):void 0}}}),p.Nested=p.invent({create:function(){this.constructor.call(this,p.create("svg")),this.style("overflow","visible")},inherit:p.Container,construct:{nested:function(){return this.put(new p.Nested)}}}),p.A=p.invent({create:"a",inherit:p.Container,extend:{to:function(a){return this.attr("href",a,p.xlink)},show:function(a){return this.attr("show",a,p.xlink)},target:function(a){return this.attr("target",a)}},construct:{link:function(a){return this.put(new p.A).to(a)}}}),p.extend(p.Element,{linkTo:function(a){var b=new p.A;return"function"==typeof a?a.call(b,b):b.to(a),this.parent().put(b).put(this)}}),p.Marker=p.invent({create:"marker",inherit:p.Container,extend:{width:function(a){return this.attr("markerWidth",a)},height:function(a){return this.attr("markerHeight",a)},ref:function(a,b){return this.attr("refX",a).attr("refY",b)},update:function(a){return this.clear(),"function"==typeof a&&a.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(a,b,c){return this.defs().marker(a,b,c)}}}),p.extend(p.Defs,{marker:function(a,b,c){return this.put(new p.Marker).size(a,b).ref(a/2,b/2).viewbox(0,0,a,b).attr("orient","auto").update(c)}}),p.extend(p.Line,p.Polyline,p.Polygon,p.Path,{marker:function(a,b,c,d){var e=["marker"];return"all"!=a&&e.push(a),e=e.join("-"),a=arguments[1]instanceof p.Marker?arguments[1]:this.doc().marker(b,c,d),this.attr(e,a)}});var q={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(a,b){return"color"==b?a:a+"-"+b}};["fill","stroke"].forEach(function(a){var b,c={};c[a]=function(c){if("string"==typeof c||p.Color.isRgb(c)||c&&"function"==typeof c.fill)this.attr(a,c);else for(b=q[a].length-1;b>=0;b--)null!=c[q[a][b]]&&this.attr(q.prefix(a,q[a][b]),c[q[a][b]]);return this},p.extend(p.Element,p.FX,c)}),p.extend(p.Element,p.FX,{rotate:function(a,b,c){return this.transform({rotation:a,cx:b,cy:c})},skew:function(a,b,c,d){return this.transform({skewX:a,skewY:b,cx:c,cy:d})},scale:function(a,b,c,d){return 1==arguments.length||3==arguments.length?this.transform({scale:a,cx:b,cy:c}):this.transform({scaleX:a,scaleY:b,cx:c,cy:d})},translate:function(a,b){return this.transform({x:a,y:b})},flip:function(a,b){return this.transform({flip:a,offset:b})},matrix:function(a){return this.attr("transform",new p.Matrix(a))},opacity:function(a){return this.attr("opacity",a)},dx:function(a){return this.x((this.target||this).x()+a)},dy:function(a){return this.y((this.target||this).y()+a)},dmove:function(a,b){return this.dx(a).dy(b)}}),p.extend(p.Rect,p.Ellipse,p.Circle,p.Gradient,p.FX,{radius:function(a,b){var c=(this.target||this).type;return"radial"==c||"circle"==c?this.attr({r:new p.Number(a)}):this.rx(a).ry(null==b?a:b)}}),p.extend(p.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(a){return this.node.getPointAtLength(a)}}),p.extend(p.Parent,p.Text,p.FX,{font:function(a){for(var b in a)"leading"==b?this.leading(a[b]):"anchor"==b?this.attr("text-anchor",a[b]):"size"==b||"family"==b||"weight"==b||"stretch"==b||"variant"==b||"style"==b?this.attr("font-"+b,a[b]):this.attr(b,a[b]);return this}}),p.Set=p.invent({create:function(a){Array.isArray(a)?this.members=a:this.clear()},extend:{add:function(){var a,b,c=[].slice.call(arguments);for(a=0,b=c.length;b>a;a++)this.members.push(c[a]);return this},remove:function(a){var b=this.index(a);return b>-1&&this.members.splice(b,1),this},each:function(a){for(var b=0,c=this.members.length;c>b;b++)a.apply(this.members[b],[b,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(a){return this.index(a)>=0},index:function(a){return this.members.indexOf(a)},get:function(a){return this.members[a]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){var a=new p.BBox;if(0==this.members.length)return a;var b=this.members[0].rbox();return a.x=b.x,a.y=b.y,a.width=b.width,a.height=b.height,this.each(function(){a=a.merge(this.rbox())}),a}},construct:{set:function(a){return new p.Set(a)}}}),p.FX.Set=p.invent({create:function(a){this.set=a}}),p.Set.inherit=function(){var a,b=[];for(var a in p.Shape.prototype)"function"==typeof p.Shape.prototype[a]&&"function"!=typeof p.Set.prototype[a]&&b.push(a);b.forEach(function(a){p.Set.prototype[a]=function(){for(var b=0,c=this.members.length;c>b;b++)this.members[b]&&"function"==typeof this.members[b][a]&&this.members[b][a].apply(this.members[b],arguments);return"animate"==a?this.fx||(this.fx=new p.FX.Set(this)):this}}),b=[];for(var a in p.FX.prototype)"function"==typeof p.FX.prototype[a]&&"function"!=typeof p.FX.Set.prototype[a]&&b.push(a);b.forEach(function(a){p.FX.Set.prototype[a]=function(){for(var b=0,c=this.set.members.length;c>b;b++)this.set.members[b].fx[a].apply(this.set.members[b].fx,arguments);return this}})},p.extend(p.Element,{data:function(a,b,c){if("object"==typeof a)for(b in a)this.data(b,a[b]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch(d){return this.attr("data-"+a)}else this.attr("data-"+a,null===b?null:c===!0||"string"==typeof b||"number"==typeof b?b:JSON.stringify(b));return this}}),p.extend(p.Element,{remember:function(a,b){if("object"==typeof arguments[0])for(var b in a)this.remember(b,a[b]);else{if(1==arguments.length)return this.memory()[a];this.memory()[a]=b}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var a=arguments.length-1;a>=0;a--)delete this.memory()[arguments[a]];return this},memory:function(){return this._memory||(this._memory={})}}),p.get=function(a){var b=document.getElementById(o(a)||a);return b?p.adopt(b):void 0},p.select=function(a,b){return new p.Set(p.utils.map((b||document).querySelectorAll(a),function(a){return p.adopt(a)}))},p.extend(p.Parent,{select:function(a){return p.select(a,this.node)}});var r="abcdef".split("");if("function"!=typeof s){var s=function(a,b){b=b||{bubbles:!1,cancelable:!1,detail:void 0};var c=document.createEvent("CustomEvent");return c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail),c};s.prototype=window.Event.prototype,window.CustomEvent=s}return function(a){for(var b=0,c=["moz","webkit"],d=0;d<c.length&&!window.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame=a.requestAnimationFrame||function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f},a.cancelAnimationFrame=a.cancelAnimationFrame||a.clearTimeout}(window),p}),!function(a,b,c){"use strict";!function d(a,b,c){function e(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,d,a,b,c)}return b[g].exports}for(var f="function"==typeof require&&require,g=0;g<c.length;g++)e(c[g]);return e}({1:[function(d){var e,f,g,h,i=function(a){return a&&a.__esModule?a:{"default":a}},j=d("./modules/handle-dom"),k=d("./modules/utils"),l=d("./modules/handle-swal-dom"),m=d("./modules/handle-click"),n=d("./modules/handle-key"),o=i(n),p=d("./modules/default-params"),q=i(p),r=d("./modules/set-params"),s=i(r);g=h=function(){function d(a){var b=g;return b[a]===c?q["default"][a]:b[a]}var g=arguments[0];if(j.addClass(b.body,"stop-scrolling"),l.resetInput(),g===c)return k.logStr("SweetAlert expects at least 1 attribute!"),!1;var i=k.extend({},q["default"]);switch(typeof g){case"string":i.title=g,i.text=arguments[1]||"",i.type=arguments[2]||"";break;case"object":if(g.title===c)return k.logStr('Missing "title" argument!'),!1;i.title=g.title;for(var n in q["default"])i[n]=d(n);i.confirmButtonText=i.showCancelButton?"Confirm":q["default"].confirmButtonText,i.confirmButtonText=d("confirmButtonText"),i.doneFunction=arguments[1]||null;break;default:return k.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof g),!1}s["default"](i),l.fixVerticalPosition(),l.openModal(arguments[1]);for(var p=l.getModal(),r=p.querySelectorAll("button"),t=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],u=function(a){return m.handleButton(a,i,p)},v=0;v<r.length;v++)for(var w=0;w<t.length;w++){var x=t[w];r[v][x]=u}l.getOverlay().onclick=u,e=a.onkeydown;var y=function(a){return o["default"](a,i,p)};a.onkeydown=y,a.onfocus=function(){setTimeout(function(){f!==c&&(f.focus(),f=c)},0)},h.enableButtons()},g.setDefaults=h.setDefaults=function(a){if(!a)throw new Error("userParams is required");if("object"!=typeof a)throw new Error("userParams has to be a object");k.extend(q["default"],a)},g.close=h.close=function(){var d=l.getModal();j.fadeOut(l.getOverlay(),5),j.fadeOut(d,5),j.removeClass(d,"showSweetAlert"),j.addClass(d,"hideSweetAlert"),j.removeClass(d,"visible");var g=d.querySelector(".sa-icon.sa-success");j.removeClass(g,"animate"),j.removeClass(g.querySelector(".sa-tip"),"animateSuccessTip"),j.removeClass(g.querySelector(".sa-long"),"animateSuccessLong");var h=d.querySelector(".sa-icon.sa-error");j.removeClass(h,"animateErrorIcon"),j.removeClass(h.querySelector(".sa-x-mark"),"animateXMark");var i=d.querySelector(".sa-icon.sa-warning");return j.removeClass(i,"pulseWarning"),j.removeClass(i.querySelector(".sa-body"),"pulseWarningIns"),j.removeClass(i.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var a=d.getAttribute("data-custom-class");j.removeClass(d,a)},300),j.removeClass(b.body,"stop-scrolling"),a.onkeydown=e,a.previousActiveElement&&a.previousActiveElement.focus(),f=c,clearTimeout(d.timeout),!0},g.showInputError=h.showInputError=function(a){var b=l.getModal(),c=b.querySelector(".sa-input-error");j.addClass(c,"show");var d=b.querySelector(".sa-error-container");j.addClass(d,"show"),d.querySelector("p").innerHTML=a,setTimeout(function(){g.enableButtons()},1),b.querySelector("input").focus()},g.resetInputError=h.resetInputError=function(a){if(a&&13===a.keyCode)return!1;var b=l.getModal(),c=b.querySelector(".sa-input-error");j.removeClass(c,"show");var d=b.querySelector(".sa-error-container");j.removeClass(d,"show")},g.disableButtons=h.disableButtons=function(){var a=l.getModal(),b=a.querySelector("button.confirm"),c=a.querySelector("button.cancel");b.disabled=!0,c.disabled=!0},g.enableButtons=h.enableButtons=function(){var a=l.getModal(),b=a.querySelector("button.confirm"),c=a.querySelector("button.cancel");b.disabled=!1,c.disabled=!1},"undefined"!=typeof a?a.sweetAlert=a.swal=g:k.logStr("SweetAlert is a frontend module!")},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};c["default"]=d,b.exports=c["default"]},{}],3:[function(b,c,d){Object.defineProperty(d,"__esModule",{value:!0});var e=b("./utils"),f=(b("./handle-swal-dom"),b("./handle-dom")),g=function(b,c,d){function g(a){o&&c.confirmButtonColor&&(n.style.backgroundColor=a)}var j,k,l,m=b||a.event,n=m.target||m.srcElement,o=-1!==n.className.indexOf("confirm"),p=-1!==n.className.indexOf("sweet-overlay"),q=f.hasClass(d,"visible"),r=c.doneFunction&&"true"===d.getAttribute("data-has-done-function");switch(o&&c.confirmButtonColor&&(j=c.confirmButtonColor,k=e.colorLuminance(j,-.04),l=e.colorLuminance(j,-.14)),m.type){case"mouseover":g(k);break;case"mouseout":g(j);break;case"mousedown":g(l);break;case"mouseup":g(k);break;case"focus":var s=d.querySelector("button.confirm"),t=d.querySelector("button.cancel");o?t.style.boxShadow="none":s.style.boxShadow="none";break;case"click":var u=d===n,v=f.isDescendant(d,n);if(!u&&!v&&q&&!c.allowOutsideClick)break;o&&r&&q?h(d,c):r&&q||p?i(d,c):f.isDescendant(d,n)&&"BUTTON"===n.tagName&&sweetAlert.close()}},h=function(a,b){var c=!0;f.hasClass(a,"show-input")&&(c=a.querySelector("input").value,c||(c="")),b.doneFunction(c),b.closeOnConfirm&&sweetAlert.close(),b.showLoaderOnConfirm&&sweetAlert.disableButtons()},i=function(a,b){var c=String(b.doneFunction).replace(/\s/g,""),d="function("===c.substring(0,9)&&")"!==c.substring(9,10);d&&b.doneFunction(!1),b.closeOnCancel&&sweetAlert.close()};d["default"]={handleButton:g,handleConfirm:h,handleCancel:i},c.exports=d["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(c,d,e){Object.defineProperty(e,"__esModule",{value:!0});var f=function(a,b){return new RegExp(" "+b+" ").test(" "+a.className+" ")},g=function(a,b){f(a,b)||(a.className+=" "+b)},h=function(a,b){var c=" "+a.className.replace(/[\t\r\n]/g," ")+" ";if(f(a,b)){for(;c.indexOf(" "+b+" ")>=0;)c=c.replace(" "+b+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")}},i=function(a){var c=b.createElement("div");return c.appendChild(b.createTextNode(a)),c.innerHTML},j=function(a){a.style.opacity="",a.style.display="block"},k=function(a){if(a&&!a.length)return j(a);for(var b=0;b<a.length;++b)j(a[b])},l=function(a){a.style.opacity="",a.style.display="none"},m=function(a){if(a&&!a.length)return l(a);for(var b=0;b<a.length;++b)l(a[b])},n=function(a,b){for(var c=b.parentNode;null!==c;){if(c===a)return!0;c=c.parentNode}return!1},o=function(a){a.style.left="-9999px",a.style.display="block";var b,c=a.clientHeight;return b="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(a).getPropertyValue("padding-top"),10):parseInt(a.currentStyle.padding),a.style.left="",a.style.display="none","-"+parseInt((c+b)/2)+"px"},p=function(a,b){if(+a.style.opacity<1){b=b||16,a.style.opacity=0,a.style.display="block";var c=+new Date,d=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){a.style.opacity=+a.style.opacity+(new Date-c)/100,c=+new Date,+a.style.opacity<1&&setTimeout(d,b)});d()}a.style.display="block"},q=function(a,b){b=b||16,a.style.opacity=1;var c=+new Date,d=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){a.style.opacity=+a.style.opacity-(new Date-c)/100,c=+new Date,+a.style.opacity>0?setTimeout(d,b):a.style.display="none"});d()},r=function(c){if("function"==typeof MouseEvent){var d=new MouseEvent("click",{view:a,bubbles:!1,cancelable:!0});c.dispatchEvent(d)}else if(b.createEvent){var e=b.createEvent("MouseEvents");e.initEvent("click",!1,!1),c.dispatchEvent(e)}else b.createEventObject?c.fireEvent("onclick"):"function"==typeof c.onclick&&c.onclick()},s=function(b){"function"==typeof b.stopPropagation?(b.stopPropagation(),b.preventDefault()):a.event&&a.event.hasOwnProperty("cancelBubble")&&(a.event.cancelBubble=!0)};e.hasClass=f,e.addClass=g,e.removeClass=h,e.escapeHtml=i,e._show=j,e.show=k,e._hide=l,e.hide=m,e.isDescendant=n,e.getTopMargin=o,e.fadeIn=p,e.fadeOut=q,e.fireClick=r,e.stopEventPropagation=s},{}],5:[function(b,d,e){Object.defineProperty(e,"__esModule",{value:!0});var f=b("./handle-dom"),g=b("./handle-swal-dom"),h=function(b,d,e){var h=b||a.event,i=h.keyCode||h.which,j=e.querySelector("button.confirm"),k=e.querySelector("button.cancel"),l=e.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(i)){for(var m=h.target||h.srcElement,n=-1,o=0;o<l.length;o++)if(m===l[o]){n=o;break}9===i?(m=-1===n?j:n===l.length-1?l[0]:l[n+1],f.stopEventPropagation(h),m.focus(),d.confirmButtonColor&&g.setFocusStyle(m,d.confirmButtonColor)):13===i?("INPUT"===m.tagName&&(m=j,j.focus()),m=-1===n?j:c):27===i&&d.allowEscapeKey===!0?(m=k,f.fireClick(m,h)):m=c}};e["default"]=h,d.exports=e["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(c,d,e){var f=function(a){return a&&a.__esModule?a:{"default":a}};Object.defineProperty(e,"__esModule",{value:!0});var g=c("./utils"),h=c("./handle-dom"),i=c("./default-params"),j=f(i),k=c("./injected-html"),l=f(k),m=".sweet-alert",n=".sweet-overlay",o=function(){var a=b.createElement("div");for(a.innerHTML=l["default"];a.firstChild;)b.body.appendChild(a.firstChild)},p=function(a){function b(){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(){var a=b.querySelector(m);return a||(o(),a=p()),a}),q=function(){var a=p();return a?a.querySelector("input"):void 0},r=function(){return b.querySelector(n)},s=function(a,b){var c=g.hexToRgb(b);a.style.boxShadow="0 0 2px rgba("+c+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},t=function(c){var d=p();h.fadeIn(r(),10),h.show(d),h.addClass(d,"showSweetAlert"),h.removeClass(d,"hideSweetAlert"),a.previousActiveElement=b.activeElement;var e=d.querySelector("button.confirm");e.focus(),setTimeout(function(){h.addClass(d,"visible")},500);var f=d.getAttribute("data-timer");if("null"!==f&&""!==f){var g=c;d.timeout=setTimeout(function(){var a=(g||null)&&"true"===d.getAttribute("data-has-done-function");a?g(null):sweetAlert.close()},f)}},u=function(){var a=p(),b=q();h.removeClass(a,"show-input"),b.value=j["default"].inputValue,b.setAttribute("type",j["default"].inputType),b.setAttribute("placeholder",j["default"].inputPlaceholder),v()},v=function(a){if(a&&13===a.keyCode)return!1;var b=p(),c=b.querySelector(".sa-input-error");h.removeClass(c,"show");var d=b.querySelector(".sa-error-container");h.removeClass(d,"show")},w=function(){var a=p();a.style.marginTop=h.getTopMargin(p())};e.sweetAlertInitialize=o,e.getModal=p,e.getOverlay=r,e.getInput=q,e.setFocusStyle=s,e.openModal=t,e.resetInput=u,e.resetInputError=v,e.fixVerticalPosition=w},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';c["default"]=d,b.exports=c["default"]},{}],8:[function(a,b,d){Object.defineProperty(d,"__esModule",{value:!0});var e=a("./utils"),f=a("./handle-swal-dom"),g=a("./handle-dom"),h=["error","warning","info","success","input","prompt"],i=function(a){var b=f.getModal(),d=b.querySelector("h2"),i=b.querySelector("p"),j=b.querySelector("button.cancel"),k=b.querySelector("button.confirm");if(d.innerHTML=a.html?a.title:g.escapeHtml(a.title).split("\n").join("<br>"),i.innerHTML=a.html?a.text:g.escapeHtml(a.text||"").split("\n").join("<br>"),a.text&&g.show(i),a.customClass)g.addClass(b,a.customClass),b.setAttribute("data-custom-class",a.customClass);else{var l=b.getAttribute("data-custom-class");g.removeClass(b,l),b.setAttribute("data-custom-class","")}if(g.hide(b.querySelectorAll(".sa-icon")),a.type&&!e.isIE8()){var m=function(){for(var d=!1,e=0;e<h.length;e++)if(a.type===h[e]){d=!0;break}if(!d)return logStr("Unknown alert type: "+a.type),{v:!1};var i=["success","error","warning","info"],j=c;-1!==i.indexOf(a.type)&&(j=b.querySelector(".sa-icon.sa-"+a.type),g.show(j));var k=f.getInput();switch(a.type){case"success":g.addClass(j,"animate"),g.addClass(j.querySelector(".sa-tip"),"animateSuccessTip"),g.addClass(j.querySelector(".sa-long"),"animateSuccessLong");break;case"error":g.addClass(j,"animateErrorIcon"),g.addClass(j.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":g.addClass(j,"pulseWarning"),g.addClass(j.querySelector(".sa-body"),"pulseWarningIns"),g.addClass(j.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":k.setAttribute("type",a.inputType),k.value=a.inputValue,k.setAttribute("placeholder",a.inputPlaceholder),g.addClass(b,"show-input"),setTimeout(function(){k.focus(),k.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof m)return m.v}if(a.imageUrl){var n=b.querySelector(".sa-icon.sa-custom");n.style.backgroundImage="url("+a.imageUrl+")",g.show(n);var o=80,p=80;if(a.imageSize){var q=a.imageSize.toString().split("x"),r=q[0],s=q[1];r&&s?(o=r,p=s):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+a.imageSize)}n.setAttribute("style",n.getAttribute("style")+"width:"+o+"px; height:"+p+"px")}b.setAttribute("data-has-cancel-button",a.showCancelButton),a.showCancelButton?j.style.display="inline-block":g.hide(j),b.setAttribute("data-has-confirm-button",a.showConfirmButton),a.showConfirmButton?k.style.display="inline-block":g.hide(k),a.cancelButtonText&&(j.innerHTML=g.escapeHtml(a.cancelButtonText)),a.confirmButtonText&&(k.innerHTML=g.escapeHtml(a.confirmButtonText)),a.confirmButtonColor&&(k.style.backgroundColor=a.confirmButtonColor,k.style.borderLeftColor=a.confirmLoadingButtonColor,k.style.borderRightColor=a.confirmLoadingButtonColor,f.setFocusStyle(k,a.confirmButtonColor)),b.setAttribute("data-allow-outside-click",a.allowOutsideClick);var t=a.doneFunction?!0:!1;b.setAttribute("data-has-done-function",t),a.animation?"string"==typeof a.animation?b.setAttribute("data-animation",a.animation):b.setAttribute("data-animation","pop"):b.setAttribute("data-animation","none"),b.setAttribute("data-timer",a.timer)};d["default"]=i,b.exports=d["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(b,c,d){Object.defineProperty(d,"__esModule",{value:!0});var e=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},f=function(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?parseInt(b[1],16)+", "+parseInt(b[2],16)+", "+parseInt(b[3],16):null},g=function(){return a.attachEvent&&!a.addEventListener},h=function(b){a.console&&a.console.log("SweetAlert: "+b)},i=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e};d.extend=e,d.hexToRgb=f,d.isIE8=g,d.logStr=h,d.colorLuminance=i},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document),!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b(require,exports,module):a.Tether=b()}(this,function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){var b=getComputedStyle(a),c=b.position;if("fixed"===c)return a;for(var d=a;d=d.parentNode;){var e=void 0;try{e=getComputedStyle(d)}catch(f){}if("undefined"==typeof e||null===e)return d;var g=e.overflow,h=e.overflowX,i=e.overflowY;if(/(auto|scroll)/.test(g+i+h)&&("absolute"!==c||["relative","absolute","fixed"].indexOf(e.position)>=0))return d}return document.body}function f(a){var b=void 0;a===document?(b=document,a=document.documentElement):b=a.ownerDocument;var c=b.documentElement,d={},e=a.getBoundingClientRect();for(var f in e)d[f]=e[f];var g=y(b);return d.top-=g.top,d.left-=g.left,"undefined"==typeof d.width&&(d.width=document.body.scrollWidth-d.left-d.right),"undefined"==typeof d.height&&(d.height=document.body.scrollHeight-d.top-d.bottom),d.top=d.top-c.clientTop,d.left=d.left-c.clientLeft,d.right=b.body.clientWidth-d.width-d.left,d.bottom=b.body.clientHeight-d.height-d.top,d}function g(a){return a.offsetParent||document.documentElement}function h(){var a=document.createElement("div");a.style.width="100%",a.style.height="200px";var b=document.createElement("div");i(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),b.appendChild(a),document.body.appendChild(b);var c=a.offsetWidth;b.style.overflow="scroll";var d=a.offsetWidth;c===d&&(d=b.clientWidth),document.body.removeChild(b);var e=c-d;return{width:e,height:e}}function i(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=[];return Array.prototype.push.apply(b,arguments),b.slice(1).forEach(function(b){if(b)for(var c in b)({}).hasOwnProperty.call(b,c)&&(a[c]=b[c])}),a}function j(a,b){if("undefined"!=typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.remove(b)});else{var c=new RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi"),d=m(a).replace(c," ");n(a,d)}}function k(a,b){if("undefined"!=typeof a.classList)b.split(" ").forEach(function(b){b.trim()&&a.classList.add(b)});else{j(a,b);var c=m(a)+(" "+b);n(a,c)}}function l(a,b){if("undefined"!=typeof a.classList)return a.classList.contains(b);var c=m(a);return new RegExp("(^| )"+b+"( |$)","gi").test(c)}function m(a){return a.className instanceof SVGAnimatedString?a.className.baseVal:a.className}function n(a,b){
a.setAttribute("class",b)}function o(a,b,c){c.forEach(function(c){-1===b.indexOf(c)&&l(a,c)&&j(a,c)}),b.forEach(function(b){l(a,b)||k(a,b)})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function p(a,b){var c=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return a+c>=b&&b>=a-c}function q(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function r(){for(var a={top:0,left:0},b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];return c.forEach(function(b){var c=b.top,d=b.left;"string"==typeof c&&(c=parseFloat(c,10)),"string"==typeof d&&(d=parseFloat(d,10)),a.top+=c,a.left+=d}),a}function s(a,b){return"string"==typeof a.left&&-1!==a.left.indexOf("%")&&(a.left=parseFloat(a.left,10)/100*b.width),"string"==typeof a.top&&-1!==a.top.indexOf("%")&&(a.top=parseFloat(a.top,10)/100*b.height),a}function t(a,b){return"scrollParent"===b?b=a.scrollParent:"window"===b&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),b===document&&(b=b.documentElement),"undefined"!=typeof b.nodeType&&!function(){var a=f(b),c=a,d=getComputedStyle(b);b=[c.left,c.top,a.width+c.left,a.height+c.top],R.forEach(function(a,c){a=a[0].toUpperCase()+a.substr(1),"Top"===a||"Left"===a?b[c]+=parseFloat(d["border"+a+"Width"]):b[c]-=parseFloat(d["border"+a+"Width"])})}(),b}var u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),v=void 0;"undefined"==typeof v&&(v={modules:[]});var w=function(){var a=0;return function(){return++a}}(),x={},y=function(a){var b=a._tetherZeroElement;"undefined"==typeof b&&(b=a.createElement("div"),b.setAttribute("data-tether-id",w()),i(b.style,{top:0,left:0,position:"absolute"}),a.body.appendChild(b),a._tetherZeroElement=b);var c=b.getAttribute("data-tether-id");if("undefined"==typeof x[c]){x[c]={};var d=b.getBoundingClientRect();for(var e in d)x[c][e]=d[e];A(function(){delete x[c]})}return x[c]},z=[],A=function(a){z.push(a)},B=function(){for(var a=void 0;a=z.pop();)a()},C=function(){function a(){d(this,a)}return u(a,[{key:"on",value:function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[a]&&(this.bindings[a]=[]),this.bindings[a].push({handler:b,ctx:c,once:d})}},{key:"once",value:function(a,b,c){this.on(a,b,c,!0)}},{key:"off",value:function(a,b){if("undefined"==typeof this.bindings||"undefined"==typeof this.bindings[a])if("undefined"==typeof b)delete this.bindings[a];else for(var c=0;c<this.bindings[a].length;)this.bindings[a][c].handler===b?this.bindings[a].splice(c,1):++c}},{key:"trigger",value:function(a){if("undefined"!=typeof this.bindings&&this.bindings[a])for(var b=0;b<this.bindings[a].length;){var c=this.bindings[a][b],d=c.handler,e=c.ctx,f=c.once,g=e;"undefined"==typeof g&&(g=this);for(var h=arguments.length,i=Array(h>1?h-1:0),j=1;h>j;j++)i[j-1]=arguments[j];d.apply(g,i),f?this.bindings[a].splice(b,1):++b}}}]),a}();v.Utils={getScrollParent:e,getBounds:f,getOffsetParent:g,extend:i,addClass:k,removeClass:j,hasClass:l,updateClasses:o,defer:A,flush:B,uniqueId:w,Evented:C,getScrollBarSize:h};var D=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();if("undefined"==typeof v)throw new Error("You must include the utils.js file before tether.js");var E=v.Utils,e=E.getScrollParent,f=E.getBounds,g=E.getOffsetParent,i=E.extend,k=E.addClass,j=E.removeClass,o=E.updateClasses,A=E.defer,B=E.flush,h=E.getScrollBarSize,F=function(){for(var a=document.createElement("div"),b=["transform","webkitTransform","OTransform","MozTransform","msTransform"],c=0;c<b.length;++c){var d=b[c];if(void 0!==a.style[d])return d}}(),G=[],H=function(){G.forEach(function(a){a.position(!1)}),B()};!function(){var a=null,b=null,c=null,d=function e(){return"undefined"!=typeof b&&b>16?(b=Math.min(b-16,250),void(c=setTimeout(e,250))):void("undefined"!=typeof a&&q()-a<10||("undefined"!=typeof c&&(clearTimeout(c),c=null),a=q(),H(),b=q()-a))};["resize","scroll","touchmove"].forEach(function(a){window.addEventListener(a,d)})}();var I={center:"center",left:"right",right:"left"},J={middle:"middle",top:"bottom",bottom:"top"},K={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},L=function(a,b){var c=a.left,d=a.top;return"auto"===c&&(c=I[b.left]),"auto"===d&&(d=J[b.top]),{left:c,top:d}},M=function(a){var b=a.left,c=a.top;return"undefined"!=typeof K[a.left]&&(b=K[a.left]),"undefined"!=typeof K[a.top]&&(c=K[a.top]),{left:b,top:c}},N=function(a){var b=a.split(" "),c=D(b,2),d=c[0],e=c[1];return{top:d,left:e}},O=N,P=function(){function a(b){var c=this;d(this,a),this.position=this.position.bind(this),G.push(this),this.history=[],this.setOptions(b,!1),v.modules.forEach(function(a){"undefined"!=typeof a.initialize&&a.initialize.call(c)}),this.position()}return u(a,[{key:"getClass",value:function(){var a=arguments.length<=0||void 0===arguments[0]?"":arguments[0],b=this.options.classes;return"undefined"!=typeof b&&b[a]?this.options.classes[a]:this.options.classPrefix?this.options.classPrefix+"-"+a:a}},{key:"setOptions",value:function(a){var b=this,c=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],d={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=i(d,a);var f=this.options,g=f.element,h=f.target,j=f.targetModifier;if(this.element=g,this.target=h,this.targetModifier=j,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(a){if("undefined"==typeof b[a])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof b[a].jquery?b[a]=b[a][0]:"string"==typeof b[a]&&(b[a]=document.querySelector(b[a]))}),k(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&k(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=O(this.options.targetAttachment),this.attachment=O(this.options.attachment),this.offset=N(this.options.offset),this.targetOffset=N(this.options.targetOffset),"undefined"!=typeof this.scrollParent&&this.disable(),this.scrollParent="scroll-handle"===this.targetModifier?this.target:e(this.target),this.options.enabled!==!1&&this.enable(c)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return f(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var a=f(this.target),b={height:a.height,width:a.width,top:a.top,left:a.left};return b.height=Math.min(b.height,a.height-(pageYOffset-a.top)),b.height=Math.min(b.height,a.height-(a.top+a.height-(pageYOffset+innerHeight))),b.height=Math.min(innerHeight,b.height),b.height-=2,b.width=Math.min(b.width,a.width-(pageXOffset-a.left)),b.width=Math.min(b.width,a.width-(a.left+a.width-(pageXOffset+innerWidth))),b.width=Math.min(innerWidth,b.width),b.width-=2,b.top<pageYOffset&&(b.top=pageYOffset),b.left<pageXOffset&&(b.left=pageXOffset),b}if("scroll-handle"===this.targetModifier){var a=void 0,c=this.target;c===document.body?(c=document.documentElement,a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):a=f(c);var d=getComputedStyle(c),e=c.scrollWidth>c.clientWidth||[d.overflow,d.overflowX].indexOf("scroll")>=0||this.target!==document.body,g=0;e&&(g=15);var h=a.height-parseFloat(d.borderTopWidth)-parseFloat(d.borderBottomWidth)-g,b={width:15,height:.975*h*(h/c.scrollHeight),left:a.left+a.width-parseFloat(d.borderLeftWidth)-15},i=0;408>h&&this.target===document.body&&(i=-11e-5*Math.pow(h,2)-.00727*h+22.58),this.target!==document.body&&(b.height=Math.max(b.height,24));var j=this.target.scrollTop/(c.scrollHeight-h);return b.top=j*(h-b.height-i)+a.top+parseFloat(d.borderTopWidth),this.target===document.body&&(b.height=Math.max(b.height,24)),b}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(a,b){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[a]&&(this._cache[a]=b.call(this)),this._cache[a]}},{key:"enable",value:function(){var a=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.options.addTargetClasses!==!1&&k(this.target,this.getClass("enabled")),k(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),a&&this.position()}},{key:"disable",value:function(){j(this.target,this.getClass("enabled")),j(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParent&&this.scrollParent.removeEventListener("scroll",this.position)}},{key:"destroy",value:function(){var a=this;this.disable(),G.forEach(function(b,c){return b===a?void G.splice(c,1):void 0})}},{key:"updateAttachClasses",value:function(a,b){var c=this;a=a||this.attachment,b=b||this.targetAttachment;var d=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var e=this._addAttachClasses;a.top&&e.push(this.getClass("element-attached")+"-"+a.top),a.left&&e.push(this.getClass("element-attached")+"-"+a.left),b.top&&e.push(this.getClass("target-attached")+"-"+b.top),b.left&&e.push(this.getClass("target-attached")+"-"+b.left);var f=[];d.forEach(function(a){f.push(c.getClass("element-attached")+"-"+a),f.push(c.getClass("target-attached")+"-"+a)}),A(function(){"undefined"!=typeof c._addAttachClasses&&(o(c.element,c._addAttachClasses,f),c.options.addTargetClasses!==!1&&o(c.target,c._addAttachClasses,f),delete c._addAttachClasses)})}},{key:"position",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];if(this.enabled){this.clearCache();var c=L(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,c);var d=this.cache("element-bounds",function(){return f(a.element)}),e=d.width,i=d.height;if(0===e&&0===i&&"undefined"!=typeof this.lastSize){var j=this.lastSize;e=j.width,i=j.height}else this.lastSize={width:e,height:i};var k=this.cache("target-bounds",function(){return a.getTargetBounds()}),l=k,m=s(M(this.attachment),{width:e,height:i}),n=s(M(c),l),o=s(this.offset,{width:e,height:i}),p=s(this.targetOffset,l);m=r(m,o),n=r(n,p);for(var q=k.left+n.left-m.left,t=k.top+n.top-m.top,u=0;u<v.modules.length;++u){var w=v.modules[u],x=w.position.call(this,{left:q,top:t,targetAttachment:c,targetPos:k,elementPos:d,offset:m,targetOffset:n,manualOffset:o,manualTargetOffset:p,scrollbarSize:z,attachment:this.attachment});if(x===!1)return!1;"undefined"!=typeof x&&"object"==typeof x&&(t=x.top,q=x.left)}var y={page:{top:t,left:q},viewport:{top:t-pageYOffset,bottom:pageYOffset-t-i+innerHeight,left:q-pageXOffset,right:pageXOffset-q-e+innerWidth}},z=void 0;return document.body.scrollWidth>window.innerWidth&&(z=this.cache("scrollbar-size",h),y.viewport.bottom-=z.height),document.body.scrollHeight>window.innerHeight&&(z=this.cache("scrollbar-size",h),y.viewport.right-=z.width),(-1===["","static"].indexOf(document.body.style.position)||-1===["","static"].indexOf(document.body.parentElement.style.position))&&(y.page.bottom=document.body.scrollHeight-t-i,y.page.right=document.body.scrollWidth-q-e),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var b=a.cache("target-offsetparent",function(){return g(a.target)}),c=a.cache("target-offsetparent-bounds",function(){return f(b)}),d=getComputedStyle(b),e=c,h={};if(["Top","Left","Bottom","Right"].forEach(function(a){h[a.toLowerCase()]=parseFloat(d["border"+a+"Width"])}),c.right=document.body.scrollWidth-c.left-e.width+h.right,c.bottom=document.body.scrollHeight-c.top-e.height+h.bottom,y.page.top>=c.top+h.top&&y.page.bottom>=c.bottom&&y.page.left>=c.left+h.left&&y.page.right>=c.right){var i=b.scrollTop,j=b.scrollLeft;y.offset={top:y.page.top-c.top+i-h.top,left:y.page.left-c.left+j-h.left}}}(),this.move(y),this.history.unshift(y),this.history.length>3&&this.history.pop(),b&&B(),!0}}},{key:"move",value:function(a){var b=this;if("undefined"!=typeof this.element.parentNode){var c={};for(var d in a){c[d]={};for(var e in a[d]){for(var f=!1,h=0;h<this.history.length;++h){var j=this.history[h];if("undefined"!=typeof j[d]&&!p(j[d][e],a[d][e])){f=!0;break}}f||(c[d][e]=!0)}}var k={top:"",left:"",right:"",bottom:""},l=function(a,c){var d="undefined"!=typeof b.options.optimizations,e=d?b.options.optimizations.gpu:null;if(e!==!1){var f=void 0,g=void 0;a.top?(k.top=0,f=c.top):(k.bottom=0,f=-c.bottom),a.left?(k.left=0,g=c.left):(k.right=0,g=-c.right),k[F]="translateX("+Math.round(g)+"px) translateY("+Math.round(f)+"px)","msTransform"!==F&&(k[F]+=" translateZ(0)")}else a.top?k.top=c.top+"px":k.bottom=c.bottom+"px",a.left?k.left=c.left+"px":k.right=c.right+"px"},m=!1;if((c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(k.position="absolute",l(c.page,a.page)):(c.viewport.top||c.viewport.bottom)&&(c.viewport.left||c.viewport.right)?(k.position="fixed",l(c.viewport,a.viewport)):"undefined"!=typeof c.offset&&c.offset.top&&c.offset.left?!function(){k.position="absolute";var d=b.cache("target-offsetparent",function(){return g(b.target)});g(b.element)!==d&&A(function(){b.element.parentNode.removeChild(b.element),d.appendChild(b.element)}),l(c.offset,a.offset),m=!0}():(k.position="absolute",l({top:!0,left:!0},a.page)),!m){for(var n=!0,o=this.element.parentNode;o&&"BODY"!==o.tagName;){if("static"!==getComputedStyle(o).position){n=!1;break}o=o.parentNode}n||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var q={},r=!1;for(var e in k){var s=k[e],t=this.element.style[e];""!==t&&""!==s&&["top","left","bottom","right"].indexOf(e)>=0&&(t=parseFloat(t),s=parseFloat(s)),t!==s&&(r=!0,q[e]=s)}r&&A(function(){i(b.element.style,q)})}}}]),a}();P.modules=[],v.position=H;var Q=i(P,v),D=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),E=v.Utils,f=E.getBounds,i=E.extend,o=E.updateClasses,A=E.defer,R=["left","top","right","bottom"];v.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=a.targetAttachment;if(!this.options.constraints)return!0;var g=this.cache("element-bounds",function(){return f(b.element)}),h=g.height,j=g.width;if(0===j&&0===h&&"undefined"!=typeof this.lastSize){var k=this.lastSize;j=k.width,h=k.height}var l=this.cache("target-bounds",function(){return b.getTargetBounds()}),m=l.height,n=l.width,p=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(a){var b=a.outOfBoundsClass,c=a.pinnedClass;b&&p.push(b),c&&p.push(c)}),p.forEach(function(a){["left","top","right","bottom"].forEach(function(b){p.push(a+"-"+b)})});var q=[],r=i({},e),s=i({},this.attachment);return this.options.constraints.forEach(function(a){var f=a.to,g=a.attachment,i=a.pin;"undefined"==typeof g&&(g="");var k=void 0,l=void 0;if(g.indexOf(" ")>=0){var o=g.split(" "),p=D(o,2);l=p[0],k=p[1]}else k=l=g;var u=t(b,f);("target"===l||"both"===l)&&(c<u[1]&&"top"===r.top&&(c+=m,r.top="bottom"),c+h>u[3]&&"bottom"===r.top&&(c-=m,r.top="top")),"together"===l&&(c<u[1]&&"top"===r.top&&("bottom"===s.top?(c+=m,r.top="bottom",c+=h,s.top="top"):"top"===s.top&&(c+=m,r.top="bottom",c-=h,s.top="bottom")),c+h>u[3]&&"bottom"===r.top&&("top"===s.top?(c-=m,r.top="top",c-=h,s.top="bottom"):"bottom"===s.top&&(c-=m,r.top="top",c+=h,s.top="top")),"middle"===r.top&&(c+h>u[3]&&"top"===s.top?(c-=h,s.top="bottom"):c<u[1]&&"bottom"===s.top&&(c+=h,s.top="top"))),("target"===k||"both"===k)&&(d<u[0]&&"left"===r.left&&(d+=n,r.left="right"),d+j>u[2]&&"right"===r.left&&(d-=n,r.left="left")),"together"===k&&(d<u[0]&&"left"===r.left?"right"===s.left?(d+=n,r.left="right",d+=j,s.left="left"):"left"===s.left&&(d+=n,r.left="right",d-=j,s.left="right"):d+j>u[2]&&"right"===r.left?"left"===s.left?(d-=n,r.left="left",d-=j,s.left="right"):"right"===s.left&&(d-=n,r.left="left",d+=j,s.left="left"):"center"===r.left&&(d+j>u[2]&&"left"===s.left?(d-=j,s.left="right"):d<u[0]&&"right"===s.left&&(d+=j,s.left="left"))),("element"===l||"both"===l)&&(c<u[1]&&"bottom"===s.top&&(c+=h,s.top="top"),c+h>u[3]&&"top"===s.top&&(c-=h,s.top="bottom")),("element"===k||"both"===k)&&(d<u[0]&&"right"===s.left&&(d+=j,s.left="left"),d+j>u[2]&&"left"===s.left&&(d-=j,s.left="right")),"string"==typeof i?i=i.split(",").map(function(a){return a.trim()}):i===!0&&(i=["top","left","right","bottom"]),i=i||[];var v=[],w=[];c<u[1]&&(i.indexOf("top")>=0?(c=u[1],v.push("top")):w.push("top")),c+h>u[3]&&(i.indexOf("bottom")>=0?(c=u[3]-h,v.push("bottom")):w.push("bottom")),d<u[0]&&(i.indexOf("left")>=0?(d=u[0],v.push("left")):w.push("left")),d+j>u[2]&&(i.indexOf("right")>=0?(d=u[2]-j,v.push("right")):w.push("right")),v.length&&!function(){var a=void 0;a="undefined"!=typeof b.options.pinnedClass?b.options.pinnedClass:b.getClass("pinned"),q.push(a),v.forEach(function(b){q.push(a+"-"+b)})}(),w.length&&!function(){var a=void 0;a="undefined"!=typeof b.options.outOfBoundsClass?b.options.outOfBoundsClass:b.getClass("out-of-bounds"),q.push(a),w.forEach(function(b){q.push(a+"-"+b)})}(),(v.indexOf("left")>=0||v.indexOf("right")>=0)&&(s.left=r.left=!1),(v.indexOf("top")>=0||v.indexOf("bottom")>=0)&&(s.top=r.top=!1),(r.top!==e.top||r.left!==e.left||s.top!==b.attachment.top||s.left!==b.attachment.left)&&b.updateAttachClasses(s,r)}),A(function(){b.options.addTargetClasses!==!1&&o(b.target,q,p),o(b.element,q,p)}),{top:c,left:d}}});var E=v.Utils,f=E.getBounds,o=E.updateClasses,A=E.defer;v.modules.push({position:function(a){var b=this,c=a.top,d=a.left,e=this.cache("element-bounds",function(){return f(b.element)}),g=e.height,h=e.width,i=this.getTargetBounds(),j=c+g,k=d+h,l=[];c<=i.bottom&&j>=i.top&&["left","right"].forEach(function(a){var b=i[a];(b===d||b===k)&&l.push(a)}),d<=i.right&&k>=i.left&&["top","bottom"].forEach(function(a){var b=i[a];(b===c||b===j)&&l.push(a)});var m=[],n=[],p=["left","top","right","bottom"];return m.push(this.getClass("abutted")),p.forEach(function(a){m.push(b.getClass("abutted")+"-"+a)}),l.length&&n.push(this.getClass("abutted")),l.forEach(function(a){n.push(b.getClass("abutted")+"-"+a)}),A(function(){b.options.addTargetClasses!==!1&&o(b.target,n,m),o(b.element,n,m)}),!0}});var D=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return v.modules.push({position:function(a){var b=a.top,c=a.left;if(this.options.shift){var d=this.options.shift;"function"==typeof this.options.shift&&(d=this.options.shift.call(this,{top:b,left:c}));var e=void 0,f=void 0;if("string"==typeof d){d=d.split(" "),d[1]=d[1]||d[0];var g=D(d,2);e=g[0],f=g[1],e=parseFloat(e,10),f=parseFloat(f,10)}else e=d.top,f=d.left;return b+=e,c+=f,{top:b,left:c}}}}),Q}),!function(a,b){"function"==typeof define&&define.amd?define(["tether"],b):"object"==typeof exports?module.exports=b(require("tether")):a.Shepherd=b(a.Tether)}(this,function(a){"use strict";function b(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function c(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(a.__proto__=b)}function d(a){var b=document.createElement("div");return b.innerHTML=a,b.children[0]}function e(a,b){var c=void 0;return"undefined"!=typeof a.matches?c=a.matches:"undefined"!=typeof a.matchesSelector?c=a.matchesSelector:"undefined"!=typeof a.msMatchesSelector?c=a.msMatchesSelector:"undefined"!=typeof a.webkitMatchesSelector?c=a.webkitMatchesSelector:"undefined"!=typeof a.mozMatchesSelector?c=a.mozMatchesSelector:"undefined"!=typeof a.oMatchesSelector&&(c=a.oMatchesSelector),c.call(a,b)}function f(a,b){if(null===a||"undefined"==typeof a)return a;if("object"==typeof a)return a;var c=a.split(" "),d=c.length,e=b.length;d>e&&(c[0]=c.slice(0,d-e+1).join(" "),c.splice(1,e));for(var f={},g=0;e>g;++g){var h=b[g];f[h]=c[g]}return f}var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;h=j=i=void 0,d=!1;var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;return void 0===i?void 0:i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return void 0;a=j,b=f,c=g,d=!0}},i=a.Utils,j=i.Evented,k=i.addClass,l=i.extend,m=i.hasClass,n=i.removeClass,o=i.uniqueId,p=new j,q={top:"bottom center",left:"middle right",right:"middle left",bottom:"top center",center:"middle center"},r=function(i){function j(a,c){return b(this,j),h(Object.getPrototypeOf(j.prototype),"constructor",this).call(this,a,c),this.tour=a,this.bindMethods(),this.setOptions(c),this}return c(j,i),g(j,[{key:"bindMethods",value:function(){var a=this,b=["_show","show","hide","isOpen","cancel","complete","scrollTo","destroy"];b.map(function(b){a[b]=a[b].bind(a)})}},{key:"setOptions",value:function(){var a=void 0===arguments[0]?{}:arguments[0];this.options=a,this.destroy(),this.id=this.options.id||this.id||"step-"+o();var b=this.options.when;if(b)for(var c in b)if({}.hasOwnProperty.call(b,c)){var d=b[c];this.on(c,d,this)}this.options.buttons||(this.options.buttons=[{text:"Next",action:this.tour.next}])}},{key:"getTour",value:function(){return this.tour}},{key:"bindAdvance",value:function(){var a=this,b=f(this.options.advanceOn,["selector","event"]),c=b.event,d=b.selector,g=function(b){a.isOpen()&&("undefined"!=typeof d?e(b.target,d)&&a.tour.next():a.el&&b.target===a.el&&a.tour.next())};document.body.addEventListener(c,g),this.on("destroy",function(){return document.body.removeEventListener(c,g)})}},{key:"getAttachTo",value:function(){var a=f(this.options.attachTo,["element","on"])||{},b=a.element;if("string"==typeof b&&(a.element=document.querySelector(b),!a.element))throw new Error("The element for this Shepherd step was not found "+b);return a}},{key:"setupTether",value:function(){if("undefined"==typeof a)throw new Error("Using the attachment feature of Shepherd requires the Tether library");var b=this.getAttachTo(),c=q[b.on||"right"];"undefined"==typeof b.element&&(b.element="viewport",c="middle center");var d={classPrefix:"shepherd",element:this.el,constraints:[{to:"window",pin:!0,attachment:"together"}],target:b.element,offset:b.offset||"0 0",attachment:c};this.tether&&this.tether.destroy(),this.tether=new a(l(d,this.options.tetherOptions))}},{key:"show",value:function(){var a=this;if("undefined"!=typeof this.options.beforeShowPromise){var b=this.options.beforeShowPromise();if("undefined"!=typeof b)return b.then(function(){return a._show()})}this._show()}},{key:"_show",value:function(){var a=this;this.trigger("before-show"),this.el||this.render(),k(this.el,"shepherd-open"),document.body.setAttribute("data-shepherd-step",this.id),this.setupTether(),this.options.scrollTo&&setTimeout(function(){a.scrollTo()}),this.trigger("show")}},{key:"hide",value:function(){this.trigger("before-hide"),n(this.el,"shepherd-open"),document.body.removeAttribute("data-shepherd-step"),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("hide")}},{key:"isOpen",value:function(){return m(this.el,"shepherd-open")}},{key:"cancel",value:function(){this.tour.cancel(),this.trigger("cancel")}},{key:"complete",value:function(){this.tour.complete(),this.trigger("complete")}},{key:"scrollTo",value:function(){var a=this.getAttachTo(),b=a.element;"undefined"!=typeof this.options.scrollToHandler?this.options.scrollToHandler(b):"undefined"!=typeof b&&b.scrollIntoView()}},{key:"destroy",value:function(){"undefined"!=typeof this.el&&(document.body.removeChild(this.el),delete this.el),this.tether&&this.tether.destroy(),this.tether=null,this.trigger("destroy")}},{key:"render",value:function(){var a=this;"undefined"!=typeof this.el&&this.destroy(),this.el=d("<div class='shepherd-step "+(this.options.classes||"")+"' data-id='"+this.id+"' "+(this.options.idAttribute?'id="'+this.options.idAttribute+'"':"")+"></div>");var b=document.createElement("div");b.className="shepherd-content",this.el.appendChild(b);var c=document.createElement("header");if(b.appendChild(c),"undefined"!=typeof this.options.title&&(c.innerHTML+="<h3 class='shepherd-title'>"+this.options.title+"</h3>",this.el.className+=" shepherd-has-title"),this.options.showCancelLink){var e=d("<a href class='shepherd-cancel-link'>✕</a>");c.appendChild(e),this.el.className+=" shepherd-has-cancel-link",this.bindCancelLink(e)}"undefined"!=typeof this.options.text&&!function(){var c=d("<div class='shepherd-text'></div>"),e=a.options.text;"function"==typeof e&&(e=e.call(a,c)),e instanceof HTMLElement?c.appendChild(e):("string"==typeof e&&(e=[e]),e.map(function(a){c.innerHTML+="<p>"+a+"</p>"})),b.appendChild(c)}();var f=document.createElement("footer");this.options.buttons&&!function(){var b=d("<ul class='shepherd-buttons'></ul>");a.options.buttons.map(function(c){var e=d("<li><a class='shepherd-button "+(c.classes||"")+"'>"+c.text+"</a>");b.appendChild(e),a.bindButtonEvents(c,e.querySelector("a"))}),f.appendChild(b)}(),b.appendChild(f),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn&&this.bindAdvance()}},{key:"bindCancelLink",value:function(a){var b=this;a.addEventListener("click",function(a){a.preventDefault(),b.cancel()})}},{key:"bindButtonEvents",value:function(a,b){var c=this;a.events=a.events||{},"undefined"!=typeof a.action&&(a.events.click=a.action);for(var d in a.events)if({}.hasOwnProperty.call(a.events,d)){var e=a.events[d];"string"==typeof e&&!function(){var a=e;e=function(){return c.tour.show(a)}}(),b.addEventListener(d,e)}this.on("destroy",function(){for(var c in a.events)if({}.hasOwnProperty.call(a.events,c)){var d=a.events[c];b.removeEventListener(c,d)}})}}]),j}(j),s=function(a){function d(){var a=this,c=void 0===arguments[0]?{}:arguments[0];b(this,d),h(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,c),this.bindMethods(),this.options=c,this.steps=this.options.steps||[];var e=["complete","cancel","hide","start","show","active","inactive"];return e.map(function(b){!function(b){a.on(b,function(c){c=c||{},c.tour=a,p.trigger(b,c)})}(b)}),this}return c(d,a),g(d,[{key:"bindMethods",value:function(){var a=this,b=["next","back","cancel","complete","hide"];b.map(function(b){a[b]=a[b].bind(a)})}},{key:"addStep",value:function(a,b){return"undefined"==typeof b&&(b=a),b instanceof r?b.tour=this:(("string"==typeof a||"number"==typeof a)&&(b.id=a.toString()),b=l({},this.options.defaults,b),b=new r(this,b)),this.steps.push(b),this}},{key:"getById",value:function(a){for(var b=0;b<this.steps.length;++b){var c=this.steps[b];if(c.id===a)return c}}},{key:"getCurrentStep",value:function(){return this.currentStep}},{key:"next",value:function(){var a=this.steps.indexOf(this.currentStep);a===this.steps.length-1?(this.hide(a),this.trigger("complete"),this.done()):this.show(a+1)}},{key:"back",value:function(){var a=this.steps.indexOf(this.currentStep);this.show(a-1)}},{key:"cancel",value:function(){"undefined"!=typeof this.currentStep&&this.currentStep.hide(),this.trigger("cancel"),this.done()}},{key:"complete",value:function(){"undefined"!=typeof this.currentStep&&this.currentStep.hide(),this.trigger("complete"),this.done()}},{key:"hide",value:function(){"undefined"!=typeof this.currentStep&&this.currentStep.hide(),this.trigger("hide"),this.done()}},{key:"done",value:function(){p.activeTour=null,n(document.body,"shepherd-active"),this.trigger("inactive",{tour:this})}},{key:"show",value:function(){var a=void 0===arguments[0]?0:arguments[0];this.currentStep?this.currentStep.hide():(k(document.body,"shepherd-active"),this.trigger("active",{tour:this})),p.activeTour=this;var b=void 0;b="string"==typeof a?this.getById(a):this.steps[a],b&&(this.trigger("show",{step:b,previous:this.currentStep}),this.currentStep=b,b.show())}},{key:"start",value:function(){this.trigger("start"),this.currentStep=null,this.next()}}]),d}(j);return l(p,{Tour:s,Step:r,Evented:j}),p}),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=a("./lib/schema"),a("./lib/patterns/reference"),a("./lib/patterns/nothing"),a("./lib/patterns/anything"),a("./lib/patterns/object"),a("./lib/patterns/or"),a("./lib/patterns/equality"),a("./lib/patterns/regexp"),a("./lib/patterns/class"),a("./lib/patterns/schema"),a("./lib/extensions/Boolean"),a("./lib/extensions/Number"),a("./lib/extensions/String"),a("./lib/extensions/Object"),a("./lib/extensions/Array"),a("./lib/extensions/Function"),a("./lib/extensions/Schema")},{"./lib/extensions/Array":3,"./lib/extensions/Boolean":4,"./lib/extensions/Function":5,"./lib/extensions/Number":6,"./lib/extensions/Object":7,"./lib/extensions/Schema":8,"./lib/extensions/String":9,"./lib/patterns/anything":10,"./lib/patterns/class":11,"./lib/patterns/equality":12,"./lib/patterns/nothing":13,"./lib/patterns/object":14,"./lib/patterns/or":15,"./lib/patterns/reference":16,"./lib/patterns/regexp":17,"./lib/patterns/schema":18,"./lib/schema":19}],2:[function(a,b,c){function d(a){return function(){if(g)return a.apply(this,arguments);g=!0;var b=a.apply(this,arguments);for(var c in d)delete d[c];return g=!1,b}}function e(a,b){for(var c,d=a.length;d--;)if(c=a[d](b),null!=c)return c}var f=b.exports=function(){};f.prototype={wrap:function(){if(this.wrapped)return this.validate;this.wrapped=!0;var a=["toJSON","unwrap","errors"];a=a.concat(this.publicFunctions||[]);for(var b=0;b<a.length;b++)this[a[b]]&&(this.validate[a[b]]=this[a[b]].bind(this));return this.validate},unwrap:function(){return this},toJSON:d(function(a){
var b,c=f.session;c.serialized||(c.serialized={objects:[],jsons:[],ids:[]});var d=c.serialized.objects.indexOf(this);if(a&&-1!==d){if(b=c.serialized.jsons[d],null==b.id){do b.id="id-"+Math.floor(1e5*Math.random());while(-1!==c.serialized.ids.indexOf(b.id));c.serialized.ids.push(b.id)}b={$ref:b.id}}else b={},null!=this.doc&&(b.description=this.doc),c.serialized.objects.push(this),c.serialized.jsons.push(b);return b})},f.extend=function(a){if(!a.validate)throw new Error("Schema objects must have a validate function.");var b=function(){this.initialize&&this.initialize.apply(this,arguments),this.validate=this.validate.bind(this),this.validate.schema=this.validate},c=Object.create(f.prototype);for(var d in a)c[d]=a[d];return b.prototype=c,b};var g=!1;f.session=d;var h=[];f.fromJS=e.bind(null,h),f.fromJS.def=Array.prototype.push.bind(h);var i=[];f.fromJSON=d(e.bind(null,i)),f.fromJSON.def=Array.prototype.push.bind(i),f.patterns={},f.extensions={}},{}],3:[function(a,b,c){var d=a("../BaseSchema"),e=a("../patterns/equality"),f=a("../patterns/anything").instance,g=b.exports=d.extensions.ArraySchema=d.extend({initialize:function(a,b,c){this.itemSchema=a||f,this.min=c||0,this.max=b||1/0},errors:function(a){if(!(a instanceof Array))return a+" is not an instance of Array";if(this.min===this.max){if(a.length!==this.min)return"Array length should be equal to "+this.min+" and is "+a.length}else{if(this.min>0&&a.length<this.min)return"Array length should not be less than "+this.min+" and is "+a.length;if(this.max<1/0&&a.length>this.max)return"Array length should not be more than "+this.max+" and is "+a.length}for(var b={},c=0;c<a.length;c++){var d=this.itemSchema.errors(a[c]);d&&(b[c]=d)}var e=Object.keys(b);return e.length>0?b:!1},validate:function(a){if(!(a instanceof Array))return!1;if(this.min===this.max){if(a.length!==this.min)return!1}else{if(this.min>0&&a.length<this.min)return!1;if(this.max<1/0&&a.length>this.max)return!1}for(var b=0;b<a.length;b++)if(!this.itemSchema.validate(a[b]))return!1;return!0},toJSON:d.session(function(){var a=d.prototype.toJSON.call(this,!0);return null!=a.$ref?a:(a.type="array",this.min>0&&(a.minItems=this.min),this.max<1/0&&(a.maxItems=this.max),this.itemSchema!==f&&(a.items=this.itemSchema.toJSON()),a)})});d.fromJSON.def(function(a){return!a||"array"!==a.type||a.items instanceof Array?void 0:new g(d.fromJSON(a.items),a.maxItems,a.minItems)}),Array.of=function(){var a=Array.prototype.slice.call(arguments).reverse();if(3==a.length){if("number"!=typeof a[2])throw new Error("3 arguments were passed to Array.of and 1st argument (minLength) SHOULD be number NOT "+a[2]);if("number"!=typeof a[1])throw new Error("3 arguments were passed to Array.of and 2nd argument (maxLength) SHOULD be number NOT "+a[1])}if(2===a.length){if("number"!=typeof a[1])throw new Error("2 arguments were passed to Array.of and 1nd argument (length) SHOULD be number NOT "+a[1]);a[2]=a[1]}return new g(d.fromJS(a[0]),a[1],a[2]).wrap()},Array.like=function(a){return new e(a).wrap()},Array.schema=(new g).wrap()},{"../BaseSchema":2,"../patterns/anything":10,"../patterns/equality":12}],4:[function(a,b,c){var d=a("../BaseSchema"),e=b.exports=d.extensions.BooleanSchema=new d.extend({errors:function(a){return this.validate(a)?!1:a+" is not Boolean"},validate:function(a){return Object(a)instanceof Boolean},toJSON:function(){return{type:"boolean"}}}),f=b.exports=(new e).wrap();d.fromJSON.def(function(a){return a&&"boolean"===a.type?f:void 0}),Boolean.schema=f},{"../BaseSchema":2}],5:[function(a,b,c){var d=a("../patterns/reference");Function.reference=function(a){return new d(a).wrap()}},{"../patterns/reference":16}],6:[function(a,b,c){var d=a("../BaseSchema"),e=b.exports=d.extensions.NumberSchema=d.extend({initialize:function(a,b,c,d,e){this.minimum=null!=a?a:-(1/0),this.exclusiveMinimum=b,this.maximum=null!=a?c:1/0,this.exclusiveMaximum=d,this.divisibleBy=e||0},min:function(a){return new e(a,!1,this.maximum,this.exclusiveMaximum,this.divisibleBy).wrap()},above:function(a){return new e(a,!0,this.maximum,this.exclusiveMaximum,this.divisibleBy).wrap()},max:function(a){return new e(this.minimum,this.exclusiveMinimum,a,!1,this.divisibleBy).wrap()},below:function(a){return new e(this.minimum,this.exclusiveMinimum,a,!0,this.divisibleBy).wrap()},step:function(a){return new e(this.minimum,this.exclusiveMinimum,this.maximum,this.exclusiveMaximum,a).wrap()},publicFunctions:["min","above","max","below","step"],errors:function(a){var b;return Object(a)instanceof Number?a<this.minimum?b="number = "+a+" is smaller than required minimum = "+this.minimum:a>this.maximum?b="number = "+a+" is bigger than required maximum = "+this.maximum:0!==this.divisibleBy&&a%this.divisibleBy!==0&&(b="number = "+a+" is not divisibleBy "+this.divisibleBy):b=a+" is not Number",null!=b?b:!1},validate:function(a){return Object(a)instanceof Number&&(this.exclusiveMinimum?a>this.minimum:a>=this.minimum)&&(this.exclusiveMaximum?a<this.maximum:a<=this.maximum)&&(0===this.divisibleBy||a%this.divisibleBy===0)},toJSON:function(){var a=d.prototype.toJSON.call(this);return a.type=0!==this.divisibleBy&&this.divisibleBy%1===0?"integer":"number",0!==this.divisibleBy&&1!==this.divisibleBy&&(a.divisibleBy=this.divisibleBy),this.minimum!==-(1/0)&&(a.minimum=this.minimum,this.exclusiveMinimum===!0&&(a.exclusiveMinimum=!0)),this.maximum!==1/0&&(a.maximum=this.maximum,this.exclusiveMaximum===!0&&(a.exclusiveMaximum=!0)),a}});d.fromJSON.def(function(a){return!a||"number"!==a.type&&"integer"!==a.type?void 0:new e(a.minimum,a.exclusiveMinimum,a.maximum,a.exclusiveMaximum,a.divisibleBy||("integer"===a.type?1:0))}),Number.schema=(new e).wrap(),Number.min=Number.schema.min,Number.above=Number.schema.above,Number.max=Number.schema.max,Number.below=Number.schema.below,Number.step=Number.schema.step,Number.Integer=Number.step(1)},{"../BaseSchema":2}],7:[function(a,b,c){var d=a("../patterns/reference"),e=a("../patterns/equality"),f=a("../patterns/object");Object.like=function(a){return new e(a).wrap()},Object.reference=function(a){return new d(a).wrap()},Object.schema=(new f).wrap()},{"../patterns/equality":12,"../patterns/object":14,"../patterns/reference":16}],8:[function(a,b,c){function d(a){return a.resolve=function(){return e.self=f.self=d(new g),g.prototype.resolve.apply(this,arguments)},a}var e=a("../BaseSchema"),f=a("../schema"),g=b.exports=e.extensions.SchemaReference=e.extend({validate:function(){throw new Error("Trying to validate unresolved schema reference.")},resolve:function(a){var b=e.fromJS(a);for(var c in b)b[c]instanceof Function?this[c]=b[c].bind(b):this[c]=b[c];delete this.resolve},publicFunctions:["resolve"]});f.reference=function(a){return new g},e.self=f.self=d(new g),e.fromJSON.def(function(a){if(null!=a.id||null!=a.$ref){var b,c=e.session;if(c.deserialized||(c.deserialized={references:{},subscribers:{}}),null!=a.id){b=a.id,delete a.id;var d=e.fromJSON(a);return a.id=b,c.deserialized.references[b]=d,(c.deserialized.subscribers[b]||[]).forEach(function(a){a(d)}),d}if(b=a.$ref,c.deserialized.references[b])return c.deserialized.references[b];c.deserialized.subscribers[b]||(c.deserialized.subscribers[b]=[]);var f=new g;return c.deserialized.subscribers[b].push(f.resolve.bind(f)),f}})},{"../BaseSchema":2,"../schema":19}],9:[function(a,b,c){var d=a("../patterns/regexp");String.of=function(){var a=Array.prototype.slice.call(arguments).reverse(),b=a[0]?"["+a[0]+"]":".",c=a[1],e=a.length>2?a[2]:a[1],f="^"+b+"{"+(e||0)+","+(c||"")+"}$";return new d(RegExp(f)).wrap()},String.schema=(new d).wrap()},{"../patterns/regexp":17}],10:[function(a,b,c){var d=a("../BaseSchema"),e=b.exports=d.patterns.AnythingSchema=d.extend({errors:function(a){return null==a?"anything cannot be null":!1},validate:function(a){return null!=a},toJSON:function(){return{type:"any"}}}),f=e.instance=new e;d.fromJS.def(function(a){return void 0===a?f:void 0}),d.fromJSON.def(function(a){return"any"===a.type?f:void 0})},{"../BaseSchema":2}],11:[function(a,b,c){var d=a("../BaseSchema"),e=b.exports=d.patterns.ClassSchema=d.extend({initialize:function(a){this.constructor=a},getName:function(a){return a?a instanceof Object?a.constructor.name:typeof a+" = "+a:a},errors:function(a){var b=" is not instance of ";return null==a?this.getName(a)+b+this.getName(this.constructor):a instanceof this.constructor?!1:this.getName(a)+b+this.getName(this.constructor)},validate:function(a){return a instanceof this.constructor}});d.fromJS.def(function(a){return a instanceof Function?a.schema instanceof Function?a.schema.unwrap():new e(a):void 0})},{"../BaseSchema":2}],12:[function(a,b,c){var d=a("../BaseSchema"),e=function(a,b){if(Object(a)!==a||Object(b)!==b)return a===b;if(a instanceof Array!=b instanceof Array)return!1;if(Object.keys(a).length!==Object.keys(b).length)return!1;for(var c in a)if(!e(a[c],b[c]))return!1;return!0},f=b.exports=d.patterns.EqualitySchema=d.extend({initialize:function(a){this.object=a},errors:function(a){return e(a,this.object)?!1:a+" is not equal to "+this.object},validate:function(a){return e(a,this.object)},toJSON:function(){var a=d.prototype.toJSON.call(this);return a["enum"]=[this.object],a}});d.fromJS.def(function(a){return a instanceof Array&&1===a.length?new f(a[0]):void 0})},{"../BaseSchema":2}],13:[function(a,b,c){var d=a("../BaseSchema"),e=b.exports=d.patterns.NothingSchema=d.extend({errors:function(a){return!1},validate:function(a){return null==a},toJSON:function(){return{type:"null"}}}),f=e.instance=new e;d.fromJS.def(function(a){return null===a?f:void 0}),d.fromJSON.def(function(a){return"null"===a.type?f:void 0})},{"../BaseSchema":2}],14:[function(a,b,c){var d=a("../BaseSchema"),e=a("./anything").instance,f=a("./nothing").instance,g=b.exports=d.patterns.ObjectSchema=d.extend({initialize:function(a,b){var c=this;this.other=b||e,this.properties=a||[],this.stringProps={},this.regexpProps=[],this.properties.forEach(function(a){"string"==typeof a.key?c.stringProps[a.key]=a:c.regexpProps.push(a)})},errors:function(a){var b=this;if(null==a)return a+" is not Object";var c,d={};if(Object.keys(this.stringProps).forEach(function(e){e in a?(c=b.stringProps[e].value.errors(a[e]))&&(d[e]=c):b.stringProps[e].min>0&&(d[e]="key is not present in the object")}),this.regexpProps.length||this.other!==e){var f,g=b.regexpProps.map(function(){return 0});for(var h in a)f=!1,this.regexpProps.forEach(function(b,e){b.key.test(h)&&(g[e]+=1,f=!0,(c=b.value.errors(a[h]))&&(d[h]=c))}),f||h in this.stringProps||(c=this.other.errors(a[h]))&&(d[h]=c);for(var i=0;i<b.regexpProps.length;i++){var j=b.regexpProps[i];j.min>g[i]?d[j.key.toString().slice(1,-1)]="regexp key matched "+g[i]+" times which is lower than allowed ("+j.min+")":g[i]>j.max&&(d[j.key.toString().slice(1,-1)]="regexp key matched "+g[i]+" times which is higher than allowed ("+j.max+")")}}return Object.keys(d).length?d:!1},validate:function(a){var b=this;if(null==a)return!1;var c=Object.keys(this.stringProps).every(function(c){return c in a?b.stringProps[c].value.validate(a[c]):0===b.stringProps[c].min});if(!c)return!1;if(!this.regexpProps.length&&this.other===e)return!0;var d,f=b.regexpProps.map(function(){return 0});for(var g in a){d=!1;var h=this.regexpProps.every(function(b,c){return b.key.test(g)?(d=!0,f[c]+=1,b.value.validate(a[g])):!0});if(!h)return!1;if(!(d||g in this.stringProps||this.other.validate(a[g])))return!1}for(var i=0;i<b.regexpProps.length;i++){var j=b.regexpProps[i];if(j.min>f[i]||f[i]>j.max)return!1}return!0},toJSON:d.session(function(){var a,b,c,g=d.prototype.toJSON.call(this,!0);if(null!=g.$ref)return g;g.type="object";for(a in this.stringProps)b=this.stringProps[a],g.properties=g.properties||{},g.properties[b.key]=b.value.toJSON(),1===b.min&&(g.properties[b.key].required=!0),b.title&&(g.properties[b.key].title=b.title);for(a=0;a<this.regexpProps.length;a++)b=this.regexpProps[a],g.patternProperties=g.patternProperties||{},c=b.key.toString(),c=c.substr(2,c.length-4),g.patternProperties[c]=b.value.toJSON(),b.title&&(g.patternProperties[c].title=b.title);return this.other!==e&&(g.additionalProperties=this.other===f?!1:this.other.toJSON()),g})}),h=function(){var a="[](){}^$?*+.".split("").map(function(a){return RegExp("(\\\\)*\\"+a,"g")}),b="bBwWdDsS".split("").map(function(a){return RegExp("(\\\\)*"+a,"g")});return function(c){var d,e,f;for(d=0;d<a.length;d++)if(f=c.match(a[d]))for(e=0;e<f.length;e++)if(f[e].length%2===1)return RegExp("^"+c+"$");for(d=0;d<b.length;d++)if(f=c.match(b[d]))for(e=0;e<f.length;e++)if(f[e].length%2===0)return RegExp("^"+c+"$");for(d=0;d<a.length;d++)c=c.replace(a[d],function(a){return a.substr(1)});return c}}();d.fromJS.def(function(a){if(a instanceof Object){var b,c,e=[];for(var f in a)c={value:d.fromJS(a[f])},"*"!==f?(c.min="*"===f[0]||"?"===f[0]?0:1,c.max="*"===f[0]||"+"===f[0]?1/0:1,f=f.replace(/^[*?+]/,""),f=f.replace(/\s*:[^:]+$/,function(a){return c.title=a.replace(/^\s*:\s*/,""),""}),c.key=h(f),e.push(c)):b=c.value;return new g(e,b)}}),d.fromJSON.def(function(a){if(a&&"object"===a.type){var b,c=[];for(b in a.properties)c.push({min:a.properties[b].required?1:0,max:1,key:b,value:d.fromJSON(a.properties[b]),title:a.properties[b].title});for(b in a.patternProperties)c.push({min:0,max:1/0,key:RegExp("^"+b+"$"),value:d.fromJSON(a.patternProperties[b]),title:a.patternProperties[b].title});var e;return void 0!==a.additionalProperties&&(e=a.additionalProperties===!1?f:d.fromJSON(a.additionalProperties)),new g(c,e)}})},{"../BaseSchema":2,"./anything":10,"./nothing":13}],15:[function(a,b,c){var d=a("../BaseSchema"),e=a("../patterns/equality"),f=b.exports=d.patterns.OrSchema=d.extend({initialize:function(a){this.schemas=a},errors:function(a){var b=[];return!this.validate(a)&&(this.schemas.forEach(function(c){var d=c.errors(a);d&&b.push(d)}),b.length>0)?b:!1},validate:function(a){return this.schemas.some(function(b){return b.validate(a)})},toJSON:d.session(function(){var a=d.prototype.toJSON.call(this,!0),b=this.schemas.map(function(a){return a.toJSON()}),c=b.every(function(a){return a["enum"]instanceof Array&&1===a["enum"].length});return null!=a.$ref?a:(c?a["enum"]=b.map(function(a){return a["enum"][0]}):a.type=b.map(function(a){var b="string"==typeof a.type&&1===Object.keys(a).length;return b?a.type:a}),a)})});d.fromJS.def(function(a){return a instanceof Array?new f(a.map(function(a){return void 0===a?d.self:d.fromJS(a)})):void 0}),d.fromJSON.def(function(a){return a?a["enum"]instanceof Array?new f(a["enum"].map(function(a){return new e(a)})):a.type instanceof Array?new f(a.type.map(function(a){return d.fromJSON("string"==typeof a?{type:a}:a)})):void 0:void 0})},{"../BaseSchema":2,"../patterns/equality":12}],16:[function(a,b,c){var d=a("../BaseSchema"),e=b.exports=d.patterns.ReferenceSchema=d.extend({initialize:function(a){this.value=a},getName:function(a){return a instanceof Object?a.constructor.name+" = "+a:typeof a+" = "+a},errors:function(a){if(null==a)return a+" is not a reference";if(a!==this.value){var b=" is not reference to ";return this.getName(a)+b+this.getName(this.value)}return!1},validate:function(a){return a===this.value},toJSON:function(){var a=d.prototype.toJSON.call(this);return a["enum"]=[this.value],a}});d.fromJS.def(function(a){return new e(a)})},{"../BaseSchema":2}],17:[function(a,b,c){var d=a("../BaseSchema"),e=b.exports=d.patterns.RegexpSchema=d.extend({initialize:function(a){this.regexp=a},errors:function(a){var b;return Object(a)instanceof String?this.regexp&&!this.regexp.test(a)&&(b=a+" is not matched with RegExp -> "+this.regexp):b=a+" is not a String",b?b:!1},validate:function(a){return Object(a)instanceof String&&(!this.regexp||this.regexp.test(a))},toJSON:function(){var a=d.prototype.toJSON.call(this);return a.type="string",this.regexp&&(a.pattern=this.regexp.toString(),a.pattern=a.pattern.substr(1,a.pattern.length-2)),a}});d.fromJSON.def(function(a){return a&&"string"===a.type?"pattern"in a?new e(RegExp("^"+a.pattern+"$")):"minLength"in a||"maxLength"in a?new e(RegExp("^.{"+[a.minLength||0,a.maxLength].join(",")+"}$")):new e:void 0}),d.fromJS.def(function(a){return a instanceof RegExp?new e(a):void 0})},{"../BaseSchema":2}],18:[function(a,b,c){var d=a("../BaseSchema");d.fromJS.def(function(a){return a instanceof d?a:void 0})},{"../BaseSchema":2}],19:[function(a,b,c){var d=a("./BaseSchema");schema=b.exports=function(a){var b,c;if(2===arguments.length&&(b=a,a=arguments[1]),this instanceof schema){var e=d.extend(a);return c=new e,b&&(c.doc=b),c.wrap()}return c=d.fromJS(a),schema.self.resolve(c),b&&(c.doc=b),c.wrap()},schema.Schema=d,schema.toJSON=function(a){return d.fromJS(a).toJSON()},schema.fromJS=function(a){return d.fromJS(a).wrap()},schema.fromJSON=function(a){return d.fromJSON(a).wrap()},"function"==typeof define&&define.amd&&define([],function(){return schema})},{"./BaseSchema":2}]},{},[1]);var Links={hook_id:"svg-canvas",target_hook:"button.target",max_draw:0,init:function(){"use strict";this.draw=SVG(this.hook_id),this.vp_o_x=$("#"+this.hook_id).offset().left,this.vp_o_y=$("#"+this.hook_id).offset().top,this.sub()},update_height:function(a){"use strict";$("#"+this.hook_id).css({height:this.max_draw})},sub:function(){String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})})},grid_lines:{lines:[],style:{width:2,color:"#BBB"},draw_horizontal:function(){"use strict";var a=$(Links.target_hook),b=0,c=0,d=0,e=0,f=Links.draw.width();for(b=0;b<a.length;b+=1)e=a.eq(b).outerHeight()/2,c=a.eq(b).offset().left+e-Links.vp_o_x,d=a.eq(b).offset().top+e-Links.vp_o_y,this.lines[b]=Links.draw.line(c,d,f,d).stroke(this.style)},draw_link:function(a,b,c){"use strict";var d=b,e=a,f={origin:d.outerHeight()/2,target:e.outerHeight()/2},g={x:d.offset().left+f.origin-Links.vp_o_x,y:d.offset().top+f.origin-Links.vp_o_y},h={x:e.offset().left+f.target-Links.vp_o_x,y:e.offset().top+f.target-Links.vp_o_y},i="M{0},{1} L{2},{3} L{4},{5} L{6},{7}".format(g.x,g.y,g.x+c,g.y,g.x+c,h.y-c,h.x,h.y);Links.draw.path(i).stroke({width:2}).fill({color:"transparent"})},link_routine:function(){"use strict";for(var a=$("div[data-cid]"),b=a.length,c=0;b>c;c+=1)a.eq(c)}},reload:function(){"use strict";$("#"+Links.hook_id).html(""),Links.init(),Links.grid_lines.draw_horizontal(),Links.un_blur()},blur:function(){"use strict";$("#"+Links.hook_id).attr("class","blur")},un_blur:function(){"use strict";$("#"+Links.hook_id).attr("class","")}},Router={GameMap:{short_text:{text_scene:[0,0]},long_text:{suggestions:[0,0]},yes_no:{car:[2,2],happy_or_sad:[3,3]},single_choice:{catapult:[2,4],fish_scene_one:[2,5],bird_tunnel:[2,4]},multiple_choice:{balloon:[2,5],fish_scene_two:[2,5]},ranking:{stairs:[2,6]},rating:{scroll_scene:[0,0]},group_rating:{star_game:[2,3]}},DataSchema:schema({fields:Array.of(1,50,{label:String,field_type:String,required:Boolean,field_options:Array.of(0,6,String),cid:String,next:{va:String},gametype:String}),game_title:String,game_footer:String}),RawSchema:schema(Array.of(1,50,{cid:String,field_options:Object,field_type:String,label:String,required:Boolean})),translate:function(a){"use strict";if(Router.RawSchema(a)){var b=a,c=0,d={};for(c;c<a.length;c+=1)b[c].field_options=Router.Process.field_options(a[c].field_options),b[c].next=Router.Process.logic(a[c+1]),b[c].gametype=Router.Process.game(a[c]);if(d.fields=b,d.game_title=$("#survey_title").val(),d.game_description=$("#survey_description").val(),d.game_footer=$("#survey_thank_you").val(),Router.DataSchema(d))return Router.dat=d,Router.ok=!0,!0}return Router.ok=!1,!1},Process:{field_options:function(a){"use strict";var b=[];if(a.options)for(var c=0;c<a.options.length;c+=1)b.push(a.options[c].label);return b},logic:function(a){"use strict";return a?{va:a.cid}:{va:"end"}},game:function(a){"use strict";if(Router.GameMap[a.field_type]){var b=a.field_type,c=a.field_options.length,d=[];for(var e in Router.GameMap[b])Router.GameMap[b].hasOwnProperty(e)&&Router.Helper.between(c,Router.GameMap[b][e])&&d.push(e);return d[Math.floor(Math.random()*d.length)]}}},Helper:{between:function(a,b){"use strict";return b[0]==b[1]?a==b[0]?!0:!1:a>=b[0]&&a<=b[1]?!0:!1}},get:function(){"use strict"},play:function(){"use strict";swal({title:"Ready for the Magic?!",text:"Click on Build to build your Survey. If you wish to make more changes, click on Cancel.",type:"info",confirmButtonText:"Build",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){$.ajax({type:"POST",url:"https://api.github.com/gists",data:JSON.stringify({files:{json_dat:{content:JSON.stringify(Router.get())}}}),contentType:"application/json"}).done(function(a){swal({title:"Built!",text:"Your game has been built. Click Play Now!",type:"success",confirmButtonText:"Play Now!",closeOnConfirm:!0},function(){window.open("//play.survaider.com?json="+a.files.json_dat.raw_url,"_blank")})}).fail(function(a){console.log(a),swal({title:"We're Sorry!",text:"There's been some problem with the Server. Please try again in a little while.",type:"error",closeOnConfirm:!0})})})}},tour;tour=new Shepherd.Tour({defaults:{classes:"shepherd-theme-arrows",scrollTo:!1}}),tour.addStep("add-question",{title:"Adding the Survey Questions",text:"You can drag and drop the questions to add them to your survey.",attachTo:".sb-add-field-types right",buttons:[{text:"&times;",classes:"btn-close",action:tour.cancel},{text:"Next",action:tour.next}]}),tour.addStep("add-question",{title:"Your survey is built in this area",text:"Go ahead, re arrange your questions, or click on them to customize them.",attachTo:".sb-field-wrapper left",buttons:[{text:"&times;",classes:"btn-close",action:tour.cancel},{text:"Next",action:tour.next}]}),tour.addStep("add-question",{title:"Time for the Magic to happen!",text:"Once you're done, watch your survey turning into a game!",attachTo:".play-now bottom",buttons:[{text:"&times;",classes:"btn-close",action:tour.cancel},{text:"Next",action:tour.next}]}),$(function(){setTimeout(function(){},1e3)}),function(){rivets.binders.input={publishes:!0,routine:rivets.binders.value.routine,bind:function(a){return $(a).bind("input.rivets",this.publish)},unbind:function(a){return $(a).unbind("input.rivets")}},rivets.configure({prefix:"rv",adapter:{subscribe:function(a,b,c){return c.wrapped=function(a,b){return c(b)},a.on("change:"+b,c.wrapped)},unsubscribe:function(a,b,c){return a.off("change:"+b,c.wrapped)},read:function(a,b){return"cid"===b?a.cid:a.get(b)},publish:function(a,b,c){return a.cid?a.set(b,c):a[b]=c}}})}.call(this),function(){var a,b,c,d,e,f,g=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},h={}.hasOwnProperty;e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.sync=function(){},b.prototype.indexInDOM=function(){var a;return a=$(".sb-field-wrapper").filter(function(a){return function(b,c){return $(c).data("cid")===a.cid}}(this)),$(".sb-field-wrapper").index(a)},b.prototype.is_input=function(){return null!=c.inputFields[this.get(c.options.mappings.FIELD_TYPE)]},b}(Backbone.DeepModel),d=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.initialize=function(){return this.on("add",this.copyCidToModel)},b.prototype.model=e,b.prototype.comparator=function(a){return a.indexInDOM()},b.prototype.copyCidToModel=function(a){return a.attributes.cid=a.cid},b}(Backbone.Collection),f=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="sb-field-wrapper",b.prototype.events={"click .subtemplate-wrapper":"focusEditView","click .js-duplicate":"duplicate","click .js-clear":"clear"},b.prototype.initialize=function(a){return this.parentView=a.parentView,this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove)},b.prototype.render=function(){return this.$el.addClass("response-field-"+this.model.get(c.options.mappings.FIELD_TYPE)).data("cid",this.model.cid).attr("data-cid",this.model.cid).html(c.templates["view/base"+(this.model.is_input()?"":"_non_input")]({rf:this.model})),Links.reload(),this},b.prototype.focusEditView=function(){return $("#editField").addClass("active"),this.parentView.createAndShowEditView(this.model)},b.prototype.clear=function(a){var b,d;switch(a.preventDefault(),a.stopPropagation(),b=function(a){return function(){return a.parentView.handleFormUpdate(),a.model.destroy()}}(this),d=c.options.CLEAR_FIELD_CONFIRM,typeof d){case"string":confirm(d)&&b();break;case"function":d(b);break;default:b()}return Links.reload()},b.prototype.duplicate=function(){var a;return a=_.clone(this.model.attributes),delete a.id,a.label+=" Copy",this.parentView.createField(a,{position:this.model.indexInDOM()+1})},b}(Backbone.View),b=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return g(b,a),b.prototype.className="edit-response-field",b.prototype.events={"click .js-add-option":"addOption","click .js-remove-option":"removeOption","click .js-default-updated":"defaultUpdated","input .option-label-input":"forceRender","click .sb-label-description":"prepareLabel","click .option":"prepareLabel"},b.prototype.initialize=function(a){return this.parentView=a.parentView,this.listenTo(this.model,"destroy",this.remove)},b.prototype.render=function(){return this.$el.html(c.templates["edit/base"]({rf:this.model})),rivets.bind(this.$el,{model:this.model}),Links.reload(),this},b.prototype.remove=function(){return this.parentView.editView=void 0,$("#editField").removeClass("active"),Links.reload(),b.__super__.remove.apply(this,arguments)},b.prototype.addOption=function(a){var b,d,e,f,g,h,i,j;return b=$(a.currentTarget),e=this.$el.find(".option").index(b.closest(".option")),j=this.model.get(c.options.mappings.OPTIONS)||[],f={label:c.options.dict.DEFAULT_OPTION,checked:!1},i=b.parent().parent().find(".option").length,d=this.model.get(c.options.mappings.FIELD_TYPE),c.options.limit_map[d]&&i>=c.options.limit_map[d].max?(h=b.eq(0).html(),g=h+"<br>No more than "+i+" options!",b.eq(0).html(g),b.eq(0).addClass("err"),void setTimeout(function(){return b.eq(0).html(h),b.eq(0).removeClass("err")},2500)):(e>-1?j.splice(e+1,0,f):j.push(f),this.model.set(c.options.mappings.OPTIONS,j),this.model.trigger("change:"+c.options.mappings.OPTIONS),this.forceRender())},b.prototype.removeOption=function(a){var b,d,e,f,g;return b=$(a.currentTarget),e=this.$el.find(".js-remove-option").index(b),f=b.parent().parent().find(".option").length,d=this.model.get(c.options.mappings.FIELD_TYPE),c.options.limit_map[d]&&f<=c.options.limit_map[d].min?(b.eq(0).addClass("err"),void setTimeout(function(){return b.eq(0).removeClass("err")},2500)):(g=this.model.get(c.options.mappings.OPTIONS),g.splice(e,1),this.model.set(c.options.mappings.OPTIONS,g),this.model.trigger("change:"+c.options.mappings.OPTIONS),this.forceRender())},b.prototype.defaultUpdated=function(a){var b;return b=$(a.currentTarget),"checkboxes"!==this.model.get(c.options.mappings.FIELD_TYPE)&&this.$el.find(".js-default-updated").not(b).attr("checked",!1).trigger("change"),this.forceRender()},b.prototype.forceRender=function(){return Links.reload(),this.model.trigger("change")},b.prototype.prepareLabel=function(a){var b;return b=$(a.currentTarget).find("input").eq(0),b.val().indexOf("")>-1?b.val(""):void 0},b}(Backbone.View),a=function(a){function e(){return e.__super__.constructor.apply(this,arguments)}return g(e,a),e.prototype.SUBVIEWS=[],e.prototype.events={"click .js-save-form":"saveForm","click .sb-tabs a":"showTab","click .sb-add-field-types a":"addField","mouseover .sb-add-field-types":"lockLeftWrapper","mouseout .sb-add-field-types":"unlockLeftWrapper"},e.prototype.initialize=function(a){var b;return b=a.selector,this.formBuilder=a.formBuilder,this.bootstrapData=a.bootstrapData,null!=b&&this.setElement($(b)),this.collection=new d,this.collection.bind("add",this.addOne,this),this.collection.bind("reset",this.reset,this),this.collection.bind("change",this.handleFormUpdate,this),this.collection.bind("destroy add reset",this.hideShowNoResponseFields,this),this.collection.bind("destroy",this.ensureEditViewScrolled,this),this.render(),this.collection.reset(this.bootstrapData),this.bindSaveEvent(),setTimeout(function(a){return function(){return a.formSaved=!1,a.saveForm.call(a),Links.reload(),$(".play-now").removeAttr("disabled")}}(this),2500)},e.prototype.bindSaveEvent=function(){return this.formSaved=!0,this.saveFormButton=this.$el.find(".js-save-form"),this.saveFormButton.attr("disabled",!0).text(c.options.dict.ALL_CHANGES_SAVED),c.options.AUTOSAVE&&setInterval(function(a){return function(){return a.saveForm.call(a)}}(this),5e3),$(window).bind("beforeunload",function(a){return function(){return a.formSaved?void 0:c.options.dict.UNSAVED_CHANGES}}(this))},e.prototype.reset=function(){return this.$responseFields.html(""),this.addAll(),Links.reload()},e.prototype.render=function(){var a,b,d,e;for(this.$el.html(c.templates.page()),this.$fbLeft=this.$el.find(".sb-left"),this.$responseFields=this.$el.find(".sb-response-fields"),this.bindWindowScrollEvent(),this.hideShowNoResponseFields(),d=this.SUBVIEWS,a=0,b=d.length;b>a;a++)e=d[a],new e({parentView:this}).render();return Links.reload(),this},e.prototype.bindWindowScrollEvent=function(){return $(window).on("scroll",function(a){return function(){var b,c,d;return b=$(".sb-tab-pane"),d=Math.max(0,$(window).scrollTop()-b.offset().top),c=a.$responseFields.height(),b.css({"padding-top":Math.min(c,d)})}}(this))},e.prototype.showTab=function(a){var b,c,d;return b=$(a.currentTarget),d=b.data("target"),"#editField"!==d&&this.unlockLeftWrapper(),"#editField"===d&&!this.editView&&(c=this.collection.models[0])?this.createAndShowEditView(c):Links.reload()},e.prototype.addOne=function(a,b,c){var d,e;return e=new f({model:a,parentView:this}),null!=c.$replaceEl?c.$replaceEl.replaceWith(e.render().el):null==c.position||-1===c.position?this.$responseFields.append(e.render().el):0===c.position?this.$responseFields.prepend(e.render().el):(d=this.$responseFields.find(".sb-field-wrapper").eq(c.position))[0]?d.before(e.render().el):this.$responseFields.append(e.render().el)},e.prototype.setSortable=function(){return this.$responseFields.hasClass("ui-sortable")&&(this.$responseFields.sortable("destroy"),Links.reload()),this.$responseFields.sortable({forcePlaceholderSize:!0,placeholder:"sortable-placeholder",stop:function(a){return function(b,d){var e;return d.item.data("field-type")&&(e=a.collection.create(c.helpers.defaultFieldAttrs(d.item.data("field-type")),{$replaceEl:d.item}),a.createAndShowEditView(e)),a.handleFormUpdate(),!0}}(this),update:function(a){return function(b,c){return c.item.data("field-type")?void 0:a.ensureEditViewScrolled()}}(this),deactivate:function(a){return function(a,b){return Links.reload()}}(this),activate:function(a){return function(a,b){return Links.blur()}}(this)}),this.setDraggable()},e.prototype.setDraggable=function(){var a;return a=this.$el.find("[data-field-type]"),a.draggable({connectToSortable:this.$responseFields,helper:function(a){return function(){var a;return a=$("<div class='response-field-draggable-helper' />"),a.css({width:"374px",height:"80px"}),a}}(this)})},e.prototype.addAll=function(){return this.collection.each(this.addOne,this),this.setSortable(),Links.reload()},e.prototype.hideShowNoResponseFields=function(){return this.$el.find(".sb-no-response-fields")[this.collection.length>0?"hide":"show"]()},e.prototype.addField=function(a){var b;return b=$(a.currentTarget).data("field-type"),this.createField(c.helpers.defaultFieldAttrs(b))},e.prototype.createField=function(a,b){var c;return c=this.collection.create(a,b),this.createAndShowEditView(c),this.handleFormUpdate()},e.prototype.createAndShowEditView=function(a){var c,d;if(d=this.$el.find(".sb-field-wrapper").filter(function(){return $(this).data("cid")===a.cid;
}),d.addClass("editing").siblings(".sb-field-wrapper").removeClass("editing"),this.editView){if(this.editView.model.cid===a.cid)return this.$el.find('.sb-tabs a[data-target="#editField"]').click(),void this.scrollLeftWrapper(d);this.editView.remove(),$("#editField").removeClass("active")}return this.editView=new b({model:a,parentView:this}),c=this.editView.render().$el,this.$el.find(".sb-edit-field-wrapper").html(c),$("#editField").addClass("active"),this.scrollLeftWrapper(d),this},e.prototype.ensureEditViewScrolled=function(){return this.editView?this.scrollLeftWrapper($(".sb-field-wrapper.editing")):void 0},e.prototype.scrollLeftWrapper=function(a){return this.unlockLeftWrapper(),a[0]?$.scrollWindowTo(this.$el.offset().top+a.offset().top-this.$responseFields.offset().top,200,function(a){return function(){return a.lockLeftWrapper()}}(this)):void 0},e.prototype.lockLeftWrapper=function(){return this.$fbLeft.data("locked",!0)},e.prototype.unlockLeftWrapper=function(){return this.$fbLeft.data("locked",!1)},e.prototype.handleFormUpdate=function(){return this.updatingBatch?void 0:(this.formSaved=!1,this.saveFormButton.removeAttr("disabled").text(c.options.dict.SAVE_FORM))},e.prototype.saveForm=function(a){var b;if(!this.formSaved)return this.formSaved=!0,this.saveFormButton.attr("disabled",!0).text(c.options.dict.ALL_CHANGES_SAVED),this.collection.sort(),b=JSON.stringify({fields:this.collection.toJSON()}),c.options.HTTP_ENDPOINT&&this.doAjaxSave(b),this.formBuilder.trigger("save",this.collection.toJSON())},e.prototype.doAjaxSave=function(a){return $.ajax({url:c.options.HTTP_ENDPOINT,type:c.options.HTTP_METHOD,data:a,contentType:"application/json",success:function(a){return function(b){var c,d,e,f;for(a.updatingBatch=!0,d=0,e=b.length;e>d;d++)c=b[d],null!=(f=a.collection.get(c.cid))&&f.set({id:c.id}),a.collection.trigger("sync");return a.updatingBatch=void 0}}(this)})},e}(Backbone.View),c=function(){function b(b){var c;null==b&&(b={}),_.extend(this,Backbone.Events),c=_.extend(b,{formBuilder:this}),this.mainView=new a(c),Links.reload()}return b.helpers={defaultFieldAttrs:function(a){var c,d;return c={},c[b.options.mappings.LABEL]=b.options.dict.DEFAULT_LABEL,c[b.options.mappings.FIELD_TYPE]=a,c[b.options.mappings.REQUIRED]=!0,c.field_options={},("function"==typeof(d=b.fields[a]).defaultAttributes?d.defaultAttributes(c):void 0)||c},simple_format:function(a){return null!=a?a.replace(/\n/g,"<br />"):void 0}},b.options={BUTTON_CLASS:"sb-button",HTTP_ENDPOINT:"",HTTP_METHOD:"POST",AUTOSAVE:!0,CLEAR_FIELD_CONFIRM:!1,mappings:{SIZE:"field_options.size",UNITS:"field_options.units",LABEL:"label",FIELD_TYPE:"field_type",REQUIRED:"required",ADMIN_ONLY:"admin_only",OPTIONS:"field_options.options",DESCRIPTION:"field_options.description",INCLUDE_OTHER:"field_options.include_other_option",INCLUDE_BLANK:"field_options.include_blank_option",INTEGER_ONLY:"field_options.integer_only",MIN:"field_options.min",MAX:"field_options.max",MINLENGTH:"field_options.minlength",MAXLENGTH:"field_options.maxlength",LENGTH_UNITS:"field_options.min_max_length_units"},limit_map:{yes_no:{min:2,max:3},single_choice:{min:2,max:5},multiple_choice:{min:2,max:5},ranking:{min:2,max:6},group_rating:{min:2,max:3}},dict:{ALL_CHANGES_SAVED:"Saved",DEFAULT_LABEL:"Question Title",DEFAULT_OPTION:"Option",DEFAULT_YES:"Yes",DEFAULT_NO:"No",DEFAULT_MAYBE:"Maybe",SAVE_FORM:"Save",UNSAVED_CHANGES:"You have unsaved changes. If you leave this page, you will lose those changes!",FIELDS:{short_text:"Short and quick answers to short and quick questions!<br>eg. What is your name?",long_text:"Longer, detailed responses.<br>eg. What do you REALLY feel about our product?",yes_no:"The quick opinion question.",multiple_choice:"Your responder selects many or all options here!",single_choice:"For questions to which you want only one answer",ranking:"Users can drag and drop the following options according to their preference!",rating:"This question asks to rate on a scale of 1 to 10.<br>eg. How much do you like the design of our product?",group_rating:"Ask users to rate a number of things on a scale of one star to five stars!"}}},b.fields={},b.inputFields={},b.nonInputFields={},b.registerField=function(a,c){var d,e,f,g;for(f=["view","edit"],d=0,e=f.length;e>d;d++)g=f[d],c[g]=_.template(c[g]);return c.field_type=a,b.fields[a]=c,"non_input"===c.type?b.nonInputFields[a]=c:b.inputFields[a]=c},b}(),window.Formbuilder=c,"undefined"!=typeof module&&null!==module?module.exports=c:window.Formbuilder=c}.call(this),function(){Formbuilder.registerField("group_rating",{order:8,view:'<% for (i in (rf.get(Formbuilder.options.mappings.OPTIONS) || [])) { %>\n  <div class="line">\n    <label class=\'sb-option\'>\n      <p>\n          <%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %>\n          <br>\n          <i class="fa fa-star"></i>\n          <i class="fa fa-star"></i>\n          <i class="fa fa-star"></i>\n          <i class="fa fa-star"></i>\n          <i class="fa fa-star"></i>\n      </p>\n    </label>\n  </div>\n<% } %>\n<button class="target hanging"\n        data-target = "out"\n        data-target-index = "0"\n></button>',edit:"<%= Formbuilder.templates['edit/options']() %>",addButton:'<span class="symbol"><span class="fa fa-star"></span></span> Group Rating',defaultAttributes:function(a){return a.field_options.options=[{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1},{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1}],a}})}.call(this),function(){Formbuilder.registerField("multiple_choice",{order:5,view:'<% for (i in (rf.get(Formbuilder.options.mappings.OPTIONS) || [])) { %>\n  <div class="line">\n      <p><%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %></p>\n  </div>\n<% } %>\n<button class="target hanging"\n        data-target = "out"\n        data-target-index = "0"\n></button>',edit:"<%= Formbuilder.templates['edit/options']() %>",addButton:'<span class="symbol"><span class="fa fa-square-o"></span></span> Multiple Choice',defaultAttributes:function(a){return a.field_options.options=[{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1},{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1}],a}})}.call(this),function(){Formbuilder.registerField("long_text",{order:1,view:'<div class="line">\n    <p>Any Response</p>\n    <button class="target" data-target="out"></button>\n</div>',edit2:"<%= Formbuilder.templates['edit/size']() %>\n<%= Formbuilder.templates['edit/min_max_length']() %>",edit:"",addButton:'<span class="symbol">&#182;</span> Long Text'})}.call(this),function(){Formbuilder.registerField("ranking",{order:6,view:'<% for (i in (rf.get(Formbuilder.options.mappings.OPTIONS) || [])) { %>\n  <div class="line">\n    <label class=\'sb-option\'>\n      <p>\n          <span class="digit up"><i class="fa fa-arrow-up"></i></span><span class="digit down"><i class="fa fa-arrow-down"></i></span>\n          <%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %>\n      </p>\n    </label>\n  </div>\n<% } %>\n<button class="target hanging"\n        data-target = "out"\n        data-target-index = "0"\n></button>',edit:"<%= Formbuilder.templates['edit/options']() %>",addButton:'<span class="symbol"><span class="fa fa-bars"></span></span> Ranking',defaultAttributes:function(a){return a.field_options.options=[{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1},{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1}],a}})}.call(this),function(){Formbuilder.registerField("rating",{order:7,view:'<div class="line">\n  <label class=\'sb-option\'>\n    <p>\n          <span class="digit">1</span>\n          <span class="digit">2</span>\n          <span class="digit">3</span>\n          <span class="digit">4</span>\n          <span class="digit spacer">...</span>\n          <span class="digit">8</span>\n          <span class="digit">9</span>\n          <span class="digit">10</span>\n    </p>\n  </label>\n</div>\n<button class="target hanging"\n        data-target = "out"\n        data-target-index = "0"\n></button>',edit:"",addButton:'<span class="symbol"><span class="fa fa-star"></span></span> Rating'})}.call(this),function(){Formbuilder.registerField("short_text",{order:0,view:'<div class="line">\n    <p>Any Response</p>\n    <button class="target" data-target="out"></button>\n</div>',edit:"",ed:"<%= Formbuilder.templates['edit/min_max_length']() %>",addButton:"<span class='symbol'><span class='fa fa-font'></span></span> Short Text"})}.call(this),function(){Formbuilder.registerField("single_choice",{order:4,view:'<% for (i in (rf.get(Formbuilder.options.mappings.OPTIONS) || [])) { %>\n  <div class="line">\n      <span class="link"></span>\n      <p><%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %></p>\n      <button class="target"\n              data-target = "out"\n              data-target-index = "<%= i %>"\n              data-target-value = "<%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %>"\n      ></button>\n  </div>\n<% } %>',edit:"<%= Formbuilder.templates['edit/options']() %>",addButton:'<span class="symbol"><span class="fa fa-circle-o"></span></span> Single Choice',defaultAttributes:function(a){return a.field_options.options=[{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1},{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1}],a}})}.call(this),function(){Formbuilder.registerField("yes_no",{order:2,view:'<% for (i in (rf.get(Formbuilder.options.mappings.OPTIONS) || [])) { %>\n  <div class="line">\n      <span class="link"></span>\n      <p><%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %></p>\n      <button class="target"\n              data-target = "out"\n              data-target-index = "<%= i %>"\n              data-target-value = "<%= rf.get(Formbuilder.options.mappings.OPTIONS)[i].label %>"\n      ></button>\n  </div>\n<% } %>',edit:"<%= Formbuilder.templates['edit/options']() %>",addButton:'<span class="symbol"><span class="fa fa-dot-circle-o"></span></span> Yes / No',defaultAttributes:function(a){return a.field_options.options=[{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1},{label:Formbuilder.options.dict.DEFAULT_OPTION,checked:!1}],a}})}.call(this),this.Formbuilder=this.Formbuilder||{},this.Formbuilder.templates=this.Formbuilder.templates||{},this.Formbuilder.templates["edit/base"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="\n"+(null==(__t=Formbuilder.templates["edit/common"]({rf:rf}))?"":__t)+"\n"+(null==(__t=Formbuilder.fields[rf.get(Formbuilder.options.mappings.FIELD_TYPE)].edit({rf:rf}))?"":__t)+"\n";return __p},this.Formbuilder.templates["edit/base_header"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<div class='sb-field-label'>\n  <span data-rv-text=\"model."+(null==(__t=Formbuilder.options.mappings.LABEL)?"":__t)+"\"></span>\n  <code class='field-type' data-rv-text='model."+(null==(__t=Formbuilder.options.mappings.FIELD_TYPE)?"":__t)+"'></code>\n  <span class='fa fa-arrow-right pull-right'></span>\n</div>";return __p},this.Formbuilder.templates["edit/base_non_input"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=Formbuilder.templates["edit/base_header"]())?"":__t)+"\n"+(null==(__t=Formbuilder.fields[rf.get(Formbuilder.options.mappings.FIELD_TYPE)].edit({rf:rf}))?"":__t)+"\n";return __p},this.Formbuilder.templates["edit/checkboxes"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<!--label>\n  <input type='checkbox' data-rv-checked='model."+(null==(__t=Formbuilder.options.mappings.REQUIRED)?"":__t)+"' />\n  Required\n</label-->\n";return __p},this.Formbuilder.templates["edit/common"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<div class='sb-edit-section-header'>Edit Question</div>\n\n<div class='sb-common-wrapper'>\n  <div class='sb-label-description'>\n    "+(null==(__t=Formbuilder.templates["edit/label_description"]({rf:rf}))?"":__t)+"\n  </div>\n  <div class='sb-common-checkboxes'>\n    "+(null==(__t=Formbuilder.templates["edit/checkboxes"]())?"":__t)+"\n  </div>\n  <div class='sb-clear'></div>\n</div>\n";return __p},this.Formbuilder.templates["edit/integer_only"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<div class='sb-edit-section-header'>Integer only</div>\n<label>\n  <input type='checkbox' data-rv-checked='model."+(null==(__t=Formbuilder.options.mappings.INTEGER_ONLY)?"":__t)+"' />\n  Only accept integers\n</label>\n";return __p},this.Formbuilder.templates["edit/label_description"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<h3>What question do you want to ask?</h3>\n<input type='text' data-rv-input='model."+(null==(__t=Formbuilder.options.mappings.LABEL)?"":__t)+'\' placeholder="Question" />\n<p>\n'+(null==(__t=Formbuilder.options.dict.FIELDS[rf.get(Formbuilder.options.mappings.FIELD_TYPE)])?"":__t)+"\n</p>";return __p},this.Formbuilder.templates["edit/min_max"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class=\'sb-edit-section-header\'>Minimum / Maximum</div>\n\nAbove\n<input type="text" data-rv-input="model.'+(null==(__t=Formbuilder.options.mappings.MIN)?"":__t)+'" style="width: 30px" />\n\n&nbsp;&nbsp;\n\nBelow\n<input type="text" data-rv-input="model.'+(null==(__t=Formbuilder.options.mappings.MAX)?"":__t)+'" style="width: 30px" />\n';return __p},this.Formbuilder.templates["edit/min_max_length"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class=\'sb-edit-section-header\'>Length Limit</div>\n\nMin\n<input type="text" data-rv-input="model.'+(null==(__t=Formbuilder.options.mappings.MINLENGTH)?"":__t)+'" style="width: 30px" />\n\n&nbsp;&nbsp;\n\nMax\n<input type="text" data-rv-input="model.'+(null==(__t=Formbuilder.options.mappings.MAXLENGTH)?"":__t)+'" style="width: 30px" />\n\n&nbsp;&nbsp;\n\n<select data-rv-value="model.'+(null==(__t=Formbuilder.options.mappings.LENGTH_UNITS)?"":__t)+'" style="width: auto;">\n  <option value="characters">characters</option>\n  <option value="words">words</option>\n</select>\n';return __p},this.Formbuilder.templates["edit/options"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="<div class='sb-edit-section-header'>Add Option</div>\n\n","undefined"!=typeof includeBlank&&(__p+="\n  <label>\n    <input type='checkbox' data-rv-checked='model."+(null==(__t=Formbuilder.options.mappings.INCLUDE_BLANK)?"":__t)+"' />\n    Include blank\n  </label>\n"),__p+="\n\n<div class='option' data-rv-each-option='model."+(null==(__t=Formbuilder.options.mappings.OPTIONS)?"":__t)+'\'>\n  <input type="text" data-rv-input="option:label" class=\'option-label-input\' />\n  <a class="js-remove-option" title="Remove Option"><i class="fa fa-times-circle"></i></a>\n</div>\n\n',"undefined"!=typeof includeOther&&(__p+="\n  <label>\n    <input type='checkbox' data-rv-checked='model."+(null==(__t=Formbuilder.options.mappings.INCLUDE_OTHER)?"":__t)+'\' />\n    Include "other"\n  </label>\n'),__p+='\n\n<a class="js-add-option .button"><i class="fa fa-plus-circle"></i>&nbsp;Add Option</a>\n';return __p},this.Formbuilder.templates["edit/size"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<div class='sb-edit-section-header'>Size</div>\n<select data-rv-value=\"model."+(null==(__t=Formbuilder.options.mappings.SIZE)?"":__t)+'">\n  <option value="small">Small</option>\n  <option value="medium">Medium</option>\n  <option value="large">Large</option>\n</select>\n';return __p},this.Formbuilder.templates["edit/units"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class=\'sb-edit-section-header\'>Units</div>\n<input type="text" data-rv-input="model.'+(null==(__t=Formbuilder.options.mappings.UNITS)?"":__t)+'" />\n';return __p},this.Formbuilder.templates["edit/yes_no"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<div class='sb-edit-section-header'>Yes No</div>\n\n<div class='option' data-rv-each-option='model."+(null==(__t=Formbuilder.options.mappings.OPTIONS)?"":__t)+'\'>\n  <input type="text" data-rv-input="option:label" class=\'option-label-input\' />\n  <a class="js-remove-option" title="Remove Option"><i class=\'fa fa-minus-circle\'></i></a>\n</div>\n\n<div class=\'sb-bottom-add\'>\n  <a class="js-add-option '+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'">Add option</a>\n</div>\n';return __p},this.Formbuilder.templates.page=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+=(null==(__t=Formbuilder.templates["partials/left_side"]())?"":__t)+"\n"+(null==(__t=Formbuilder.templates["partials/right_side"]())?"":__t)+"\n<div class='sb-clear'></div>";return __p},this.Formbuilder.templates["partials/add_field"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+="<div class='sb-tab-pane active' id='addField'>\n  <div class='sb-add-field-types'>\n    <div class='section'>\n      ",_.each(_.sortBy(Formbuilder.inputFields,"order"),function(a){__p+='\n        <a data-field-type="'+(null==(__t=a.field_type)?"":__t)+'" class="'+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'">\n          '+(null==(__t=a.addButton)?"":__t)+"\n        </a>\n      "}),__p+="\n    </div>\n\n    <div class='section'>\n      ",_.each(_.sortBy(Formbuilder.nonInputFields,"order"),function(a){__p+='\n        <a data-field-type="'+(null==(__t=a.field_type)?"":__t)+'" class="'+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+'">\n          '+(null==(__t=a.addButton)?"":__t)+"\n        </a>\n      "}),__p+="\n    </div>\n  </div>\n</div>\n";return __p},this.Formbuilder.templates["partials/edit_field"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<div class='sb-field-options' id='editField'>\n  <div class='sb-edit-field-wrapper'></div>\n  <div class=\"sb-field-options-done\">\n      <button onclick='$(\"#editField\").removeClass(\"active\");'>Done</button>\n  </div>\n</div>\n";return __p},this.Formbuilder.templates["partials/left_side"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<div class='sb-left'>\n    <div class=\"header\">\n        <h2>Sample Survey</h2>\n        <button class='js-save-form'></button>\n        <button class='play-now' onclick=\"Router.play();\" disabled>Play Now!</button>\n    </div>\n\n    <div class=\"content\">\n        <h2>Question Type</h2>\n        <div class='sb-tab-content'>\n            "+(null==(__t=Formbuilder.templates["partials/add_field"]())?"":__t)+"\n            "+(null==(__t=Formbuilder.templates["partials/edit_field"]())?"":__t)+'\n        </div>\n\n        <!--h3>Generic Help Text here</h3-->\n        <p>Go ahead, build your survey. Then click "Play Now" to see the magic.</p>\n    </div>\n\n    <div class="footer">\n        <p><img src="vendor/img/survaider.png">Survaider Builder</p>\n        <p>v0.1.2 Pre-Alpha</p>\n        <p><a href="https://github.com/PrashntS/survaider-builder">GitHub</a></p>\n    </div>\n</div>';return __p},this.Formbuilder.templates["partials/right_side"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class=\'sb-right\'>\n  <div id=\'svg-canvas\'></div>\n  <div class="sb-survey-description header">\n      <p class="section">Introduction Screen</p>\n      <input type="text" placeholder="Survey Title" value="Facebook Market Research" id="survey_title">\n      <textarea id="survey_description">Play to answer questions about your most beloved social networking website - Facebook. Help us in making a better product for you. :)</textarea>\n      <button class="target_O"\n              data-target = "top_out"\n              data-target-index = "0"\n      ></button>\n  </div>\n  <div class=\'sb-response-fields\'>\n  </div>\n  <div class="sb-survey-description footer">\n      <p class="section">End Screen</p>\n      <textarea id="survey_thank_you">Thank you for contributing!</textarea>\n      <button class="target_O"\n              data-target = "top_in"\n              data-target-index = "0"\n      ></button>\n  </div>\n</div>\n';return __p},this.Formbuilder.templates["partials/save_button"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<div class='sb-save-wrapper'>\n  <button class='js-save-form "+(null==(__t=Formbuilder.options.BUTTON_CLASS)?"":__t)+"'></button>\n</div>";return __p},this.Formbuilder.templates["view/base"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+='<div class=\'subtemplate-wrapper\'>\n    <div class=\'cover\'></div>\n    <div class="field-card">\n        <div class="meta">\n            <p class="section">Question</p>\n\n            '+(null==(__t=Formbuilder.templates["view/label"]({rf:rf}))?"":__t)+'\n\n            <button class="target" data-target="in"></button>\n        </div>\n        <div class="logic">\n            <p class="section">Options</p>\n            '+(null==(__t=Formbuilder.fields[rf.get(Formbuilder.options.mappings.FIELD_TYPE)].view({rf:rf}))?"":__t)+"\n        </div>\n        "+(null==(__t=Formbuilder.templates["view/duplicate_remove"]({rf:rf}))?"":__t)+"\n    </div>\n</div>\n";return __p},this.Formbuilder.templates["view/base_non_input"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="";return __p},this.Formbuilder.templates["view/description"]=function(obj){obj||(obj={});var __t,__p="";_.escape;with(obj)__p+="<span class='help-block'>\n  "+(null==(__t=Formbuilder.helpers.simple_format(rf.get(Formbuilder.options.mappings.DESCRIPTION)))?"":__t)+"\n</span>\n";return __p},this.Formbuilder.templates["view/duplicate_remove"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+='<div class=\'actions-wrapper\'>\n  <a class="js-duplicate" title="Duplicate Field">Duplicate</a>\n  <a class="js-clear" title="Remove Field">Delete</a>\n</div>';return __p},this.Formbuilder.templates["view/label"]=function(obj){obj||(obj={});var __t,__p="";_.escape,Array.prototype.join;with(obj)__p+='<p class="title">'+(null==(__t=Formbuilder.helpers.simple_format(rf.get(Formbuilder.options.mappings.LABEL)))?"":__t)+'</p>\n<p class="type">\n    <!--<strong>Type</strong>: -->\n    <small>'+(null==(__t=Formbuilder.helpers.simple_format(rf.get(Formbuilder.options.mappings.FIELD_TYPE)).replace(/_/," "))?"":__t)+"</small>\n    <!--\n    &bullet;\n    <strong>CID:</strong> "+(null==(__t=Formbuilder.attributes)?"":__t)+"\n    &bullet;\n    ",__p+=rf.get(Formbuilder.options.mappings.REQUIRED)?"\n    Required\n    ":"\n    Optional\n    ",__p+="\n    -->\n</p>";return __p};